{"remainingRequest":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js!/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/grit12/src/components/LaunchPack_Common/Block/BlockPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mard/dev/grit12/src/components/LaunchPack_Common/Block/BlockPassword.vue","mtime":1605259998000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport AuthMixin from \"@/components/Mixins/AuthMixin\";\nimport FormCustomMixin from \"@/components/Mixins/FormCustomMixin\";\nexport default {\n  name: 'BlockPassword',\n  components: {},\n  mixins: [AuthMixin, FormCustomMixin],\n  props: {},\n  data: function data() {\n    return {\n      \"check\": false,\n      \"value\": {\n        \"password\": \"\",\n        \"new_password\": \"\",\n        \"new_password_re\": \"\"\n      }\n    };\n  },\n  created: function created() {},\n  mounted: function mounted() {},\n  methods: {\n    modify: function modify() {\n      var _this = this;\n\n      var err = '';\n      if (!this.value.password) err = '비밀번호를 입력하세요.';else if (!this.value.new_password) err = '새 비밀번호를 입력하세요.';else if (!this.value.new_password_re) err = '새 비밀번호 확인을 입력하세요.';else if (this.value.new_password !== this.value.new_password_re) err = '새 비밀번호가 다릅니다.';\n\n      if (err) {\n        this.toast(err);\n        return;\n      } // 비밀번호 체크 api\n\n\n      this.$axios.post('auth/user/login', {\n        username: this.$store.getters.user.username,\n        password: this.value.password\n      }).then(function (res) {\n        if (res.status === 200) {\n          _this.check = true;\n        }\n      }).catch(function (error) {\n        _this.toast('잘못된 비밀번호 입니다.');\n      });\n      if (this.check) this.updateInfo();\n    },\n    // 내 정보 수정 api\n    updateInfo: function updateInfo() {\n      var _this2 = this;\n\n      var params = {\n        username: this.$store.getters.user.username,\n        password: this.value.new_password\n      };\n      this.$axios.patch(\"user/\".concat(this.$store.getters.user.user_id), params).then(function (res) {\n        if (res.status === 200) {\n          _this2.toast('비밀번호가 변경되었습니다.');\n\n          _this2.setUserData(res.data);\n\n          _this2.$router.replace('mypage');\n        }\n      }).catch(function (err) {\n        if (!err.response.data.message) _this2.toast(err.response.data.detail);else _this2.toast(err.response.data.message);\n      });\n    }\n  },\n  computed: {\n    inputStyle: function inputStyle() {\n      var deco = this.cloneItem(this.inputCustom);\n      deco.border = this.brandBorder.main.border;\n      return deco;\n    }\n  },\n  watch: {}\n};",{"version":3,"sources":["BlockPassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div>\n    <c-input-password :inputCustomStyle=\"inputStyle\" :value.sync=\"value.password\" placeholder=\"현재 비밀번호\"></c-input-password>\n    <c-input-password :inputCustomStyle=\"inputStyle\" :value.sync=\"value.new_password\" placeholder=\"새 비밀번호변경\"></c-input-password>\n    <c-input-password :inputCustomStyle=\"inputStyle\" :value.sync=\"value.new_password_re\" placeholder=\"새 비밀번호변경 확인\"></c-input-password>\n    <div style=\"margin-top: 24px\">\n      <btn :color=\"brandColor.white\"\n           :backgroundColor=\"brandBgColor.brand\"\n           @clicked=\"modify\">비밀번호 변경하기</btn>\n    </div>\n  </div>\n</template>\n<script>\nimport AuthMixin from \"@/components/Mixins/AuthMixin\"\nimport FormCustomMixin from \"@/components/Mixins/FormCustomMixin\"\n\nexport default {\n  name: 'BlockPassword',\n  components: {\n\n  },\n  mixins: [\n    AuthMixin,\n    FormCustomMixin\n  ],\n  props: {\n\n  },\n  data() {\n    return {\n      \"check\": false,\n      \"value\": {\n        \"password\": \"\",\n        \"new_password\": \"\",\n        \"new_password_re\": \"\"\n      }\n    }\n  },\n  created() {\n\n  },\n  mounted() {\n\n  },\n  \n  methods: {\n    modify() {\n        let err = '';\n        if(!this.value.password) err = '비밀번호를 입력하세요.';\n        else if(!this.value.new_password) err = '새 비밀번호를 입력하세요.';\n        else if(!this.value.new_password_re) err = '새 비밀번호 확인을 입력하세요.';\n        else if(this.value.new_password !== this.value.new_password_re) err = '새 비밀번호가 다릅니다.';\n        if(err) {\n          this.toast(err);\n          return;\n        }\n        // 비밀번호 체크 api\n        this.$axios.post('auth/user/login', {\n          username: this.$store.getters.user.username,\n          password: this.value.password\n        }).then(res=> {\n          if(res.status===200) {\n            this.check = true;\n          }\n        }).catch(error=> {\n          this.toast('잘못된 비밀번호 입니다.');\n        })\n\n        if(this.check) this.updateInfo();\n      },\n    // 내 정보 수정 api\n      updateInfo() {\n        let params = {\n          username: this.$store.getters.user.username,\n          password: this.value.new_password\n        }\n        this.$axios.patch(`user/${this.$store.getters.user.user_id}`,\n          params).then(res=>{\n          if(res.status===200) {\n            this.toast('비밀번호가 변경되었습니다.');\n            this.setUserData(res.data);\n            this.$router.replace('mypage');\n          }\n        }).catch(err=> {\n          if(!err.response.data.message)\n            this.toast(err.response.data.detail);\n          else\n            this.toast(err.response.data.message);\n        })\n      }\n  },\n  computed: {\n    inputStyle() {\n      let deco = this.cloneItem(this.inputCustom);\n      deco.border = this.brandBorder.main.border;\n      return deco;\n    }\n  },\n  watch: {\n    \n  }\n}\n</script>\n\n\n"],"sourceRoot":"src/components/LaunchPack_Common/Block"}]}