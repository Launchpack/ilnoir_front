{"remainingRequest":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js!/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/grit12/src/components/Components/Common/Drawer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mard/dev/grit12/src/components/Components/Common/Drawer.vue","mtime":1605259983000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Drawer',\n  props: {\n    direction: {\n      type: String\n    },\n    exist: {\n      type: Boolean\n    },\n    bottomHeight: {\n      type: Number,\n      default: 150\n    },\n    asideStyle: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      auto_speed: '0.3s',\n      manual_speed: '0.03s',\n      threshold: 20,\n      startTime: null,\n      startPos: null,\n      translate: null,\n      active: false,\n      visible: true,\n      moving: {\n        x: null,\n        y: null\n      }\n    };\n  },\n  computed: {\n    element: function element() {\n      return this.$refs.element;\n    },\n    overlay: function overlay() {\n      return this.$refs.overlay;\n    },\n    enabled: function enabled() {\n      return this.exist === true;\n    },\n    style: function style() {\n      var deco = this.asideStyle;\n\n      if (this.direction === 'right') {\n        deco.transform = 'translate3d(100%,0,0)';\n        deco.right = 0;\n      } else if (this.direction === 'bottom') {\n        var height = window.innerHeight - this.bottomHeight;\n        deco.transform = 'translate3d(0,' + height + 'px,0)';\n        deco.bottom = 0;\n      } else {\n        deco.transform = 'translate3d(-100%,0,0)';\n        deco.left = 0;\n      }\n\n      return deco;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    document.addEventListener('touchstart', function (e) {\n      _this.handleStart(e);\n    });\n    document.addEventListener('touchmove', function (e) {\n      _this.handleMove(e);\n    });\n    document.addEventListener('touchend', function (e) {\n      _this.handleEnd(e);\n    });\n    document.addEventListener('touchcancel', function (e) {\n      _this.handleEnd(e);\n    });\n    window.addEventListener('resize', function (e) {\n      _this.setVisibality(e);\n    }, true);\n    this.overlay.addEventListener('transitionend', function (e) {\n      _this.handleZindex(e);\n    }, false);\n    this.overlay.addEventListener('click', function () {\n      _this.close();\n    }, false);\n    this.setVisibality();\n  },\n  methods: {\n    setVisibality: function setVisibality() {\n      this.visible = this.element.offsetWidth !== 0;\n    },\n    handleStart: function handleStart(e) {\n      this.startTime = new Date().getTime();\n      this.startPos = e.targetTouches[0].pageX;\n      this.element.style.transitionDuration = this.manual_speed;\n    },\n    handleMove: function handleMove(e) {\n      var gesture = this.direction === 'bottom' ? this.gestureY(e) : this.gesture(e);\n      var valid = this.validate(this.direction, gesture);\n\n      if (valid) {\n        var percent = this.percentage(this.direction, gesture);\n\n        if (this.direction === 'left') {\n          /* touch scroll-y 튕김 방지 */\n          var oldY = this.moving.y;\n          var currentY = e.touches[0].pageY;\n          var offsetY = oldY - currentY;\n          if (offsetY < 0) return;\n          /* 터치 감도 조정 코드\n          let oldX = this.moving.x;\n          let currentX = e.touches[0].pageX;\n          let offsetX = oldX - currentX;\n          if (offsetX>offsetY) return; */\n\n          this.translate = e.touches[0].pageX - this.element.offsetWidth;\n\n          if (this.translate < 0) {\n            this.element.style.transform = 'translate3d(' + this.translate + 'px,0,0)';\n          } else {\n            this.open();\n          }\n        } else if (this.direction === 'right') {\n          /* touch scroll-y 튕김 방지 */\n          var _oldY = this.moving.y;\n          var _currentY = e.touches[0].pageY;\n\n          var _offsetY = _oldY - _currentY;\n\n          if (_offsetY < 0) return;\n          this.translate = -(screen.width - this.element.offsetWidth - e.touches[0].pageX);\n\n          if (this.translate > 0) {\n            this.element.style.transform = 'translate3d(' + this.translate + 'px,0,0)';\n          } else {\n            this.open();\n          }\n        } else if (this.display === 'bottom') {\n          this.translate = -(screen.height - this.bottomHeight - e.touches[0].pageY);\n\n          if (this.translate > 0) {\n            this.element.style.transform = 'translate3d(0,' + this.translate + 'px,0)';\n          } else {\n            this.open();\n          }\n        }\n\n        this.overlayOpacity(percent / 100);\n        this.moving.x = e.touches[0].pageX;\n        this.moving.y = e.touches[0].pageY;\n      }\n    },\n    handleEnd: function handleEnd(e) {\n      var speed = this.speed(e);\n      var gesture = this.direction === 'bottom' ? this.gestureY(e) : this.gesture(e);\n      var valid = this.validate(this.direction, gesture);\n\n      if (valid) {\n        if (speed > 0.6) {\n          if (!this.active) {\n            this.open();\n          } else {\n            this.close();\n          }\n        } else {\n          if (this.direction === 'bottom') {\n            if (this.bottomHeight / 2 > Math.abs(this.translate)) {\n              this.open();\n            } else {\n              this.close();\n            }\n          } else if (this.element.offsetWidth / 2 > Math.abs(this.translate)) {\n            this.open();\n          } else {\n            this.close();\n          }\n        }\n      }\n    },\n    handleZindex: function handleZindex() {\n      var opacity = window.getComputedStyle(this.overlay).getPropertyValue('opacity');\n\n      if (opacity <= 0) {\n        this.overlay.style.zIndex = -999;\n      }\n    },\n    validate: function validate(direction, gesture) {\n      if (direction === 'left') {\n        if (this.active && gesture === 'swiperight' || !this.active && (gesture === 'swipeleft' || this.startPos > this.threshold)) {\n          return false;\n        }\n      } else if (direction === 'right') {\n        if (this.active && gesture === 'swipeleft' || !this.active && (gesture === 'swiperight' || this.startPos < screen.width - this.threshold)) {\n          return false;\n        }\n      } else if (direction === 'bottom') {\n        if (this.active && gesture === 'swipebottom' || !this.active && (gesture === 'swipebottom' || this.startPos < screen.height - this.threshold)) {\n          return false;\n        }\n      }\n\n      if (document.querySelector('.sidebar.active') && !this.active || !this.visible) {\n        return false;\n      }\n\n      return true;\n    },\n    overlayOpacity: function overlayOpacity(opacity) {\n      this.overlay.style.opacity = opacity;\n\n      if (opacity > 0) {\n        this.overlay.style.zIndex = 999;\n      }\n    },\n    gesture: function gesture(e) {\n      var directions = ['swipeleft', 'swiperight'];\n      var currentPos = e.changedTouches[0].pageX;\n\n      if (this.startPos - currentPos < 0) {\n        return directions[1];\n      } else {\n        return directions[0];\n      }\n    },\n    gestureY: function gestureY(e) {\n      var directions = ['swipetop', 'swipebottom'];\n      var currentPos = e.changedTouches[0].pageY;\n\n      if (this.startPos - currentPos < 0) {\n        return directions[1];\n      } else {\n        return directions[0];\n      }\n    },\n    open: function open() {\n      this.translate = 0;\n\n      if (this.direction === 'bottom') {\n        var height = window.innerHeight - this.bottomHeight;\n        this.element.style.transform = 'translate3d(0,' + height + 'px,0)';\n      } else {\n        this.element.style.transform = 'translate3d(' + this.translate + ',0,0)';\n      }\n\n      this.element.style.transitionDuration = this.auto_speed;\n      this.overlayOpacity(1);\n      this.lock(document.querySelector('html'));\n      this.lock(document.querySelector('body'));\n      this.element.classList.add('active');\n      this.active = true;\n      this.moving = {\n        x: null,\n        y: null\n      };\n    },\n    close: function close() {\n      if (this.direction === 'left') {\n        this.translate = '-' + this.element.offsetWidth + 'px';\n      } else if (this.direction === 'right') {\n        this.translate = this.element.offsetWidth + 'px';\n      } else if (this.direction === 'bottom') {\n        this.translate = screen.height + 'px';\n      }\n\n      if (this.direction === 'bottom') {\n        this.element.style.transform = 'translate3d(0,' + this.translate + ',0)';\n      } else {\n        this.element.style.transform = 'translate3d(' + this.translate + ',0,0)';\n      }\n\n      this.element.style.transitionDuration = this.auto_speed;\n      this.overlayOpacity(0);\n      this.unlock(document.querySelector('html'));\n      this.unlock(document.querySelector('body'));\n      this.element.classList.remove('active');\n      this.active = false;\n      this.moving = {\n        x: null,\n        y: null\n      };\n    },\n    speed: function speed(e) {\n      var time = new Date().getTime() - this.startTime;\n      var startP = Math.abs(this.startPos);\n      var endP = this.direction === 'bottom' ? Math.abs(e.changedTouches[0].pageY) : Math.abs(e.changedTouches[0].pageX);\n      var distance = startP > endP ? startP - endP : endP - startP;\n      return distance / time;\n    },\n    percentage: function percentage(direction, gesture) {\n      var percentage = 0;\n      var test = [];\n\n      if (direction === 'left') {\n        test = ['swipeleft', 'swiperight'];\n      } else if (direction === 'right') {\n        test = ['swiperight', 'swipeleft'];\n      } else if (direction === 'bottom') {\n        test = ['swipebottom', 'swipetop'];\n      }\n\n      var size = direction === 'bottom' ? 'offsetHeight' : 'offsetWidth';\n\n      if (this.active && gesture === test[0]) {\n        percentage = 100 - Math.round(Math.abs(this.translate) / this.element[size] * 100);\n      }\n\n      if (!this.active && gesture === test[1]) {\n        percentage = Math.round(100 - Math.abs(this.translate) / this.element[size] * 100);\n      }\n\n      if (percentage > 100) {\n        percentage = 100;\n      }\n\n      if (percentage < 0) {\n        percentage = 0;\n      }\n\n      return percentage;\n    },\n    lock: function lock(element) {\n      element.style.overflow = 'hidden';\n      element.style.touchAction = 'none';\n    },\n    unlock: function unlock(element) {\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('touch-action');\n    }\n  }\n};",{"version":3,"sources":["Drawer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <section v-if=\"enabled\">\r\n    <aside class=\"sidebar\" :style=\"style\" ref=\"element\">\r\n      <slot></slot>\r\n    </aside>\r\n    <div class=\"overlay\" ref=\"overlay\"></div>\r\n  </section>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: 'Drawer',\r\n    props: {\r\n      direction: {\r\n        type: String\r\n      },\r\n      exist: {\r\n        type: Boolean\r\n      },\r\n      bottomHeight: {\r\n        type: Number,\r\n        default: 150\r\n      },\r\n      asideStyle: {\r\n        type: Object,\r\n        default: function() {\r\n          return {};\r\n        }\r\n      }\r\n    },\r\n    data(){\r\n      return {\r\n        auto_speed:'0.3s',\r\n        manual_speed:'0.03s',\r\n        threshold:20,\r\n        startTime:null,\r\n        startPos:null,\r\n        translate:null,\r\n        active:false,\r\n        visible:true,\r\n        moving: {\r\n          x: null,\r\n          y: null\r\n        }\r\n      }\r\n    },\r\n    computed:{\r\n      element() {\r\n        return this.$refs.element;\r\n      },\r\n      overlay() {\r\n        return this.$refs.overlay;\r\n      },\r\n      enabled() {\r\n        return this.exist === true;\r\n\r\n      },\r\n      style() {\r\n        let deco = this.asideStyle;\r\n        if(this.direction === 'right') {\r\n          deco.transform = 'translate3d(100%,0,0)';\r\n          deco.right = 0;\r\n        } else if(this.direction === 'bottom') {\r\n          let height = window.innerHeight - this.bottomHeight;\r\n          deco.transform = 'translate3d(0,'+ height + 'px,0)';\r\n          deco.bottom = 0;\r\n          \r\n        }\r\n        else {\r\n          deco.transform = 'translate3d(-100%,0,0)';\r\n          deco.left = 0;\r\n        }\r\n        return deco;\r\n      },\r\n    },\r\n    mounted(){\r\n      document.addEventListener('touchstart',(e) =>{this.handleStart(e)});\r\n      document.addEventListener('touchmove',(e) =>{this.handleMove(e)});\r\n      document.addEventListener('touchend',(e) =>{this.handleEnd(e)});\r\n      document.addEventListener('touchcancel',(e) =>{this.handleEnd(e)});\r\n      window.addEventListener('resize', (e) =>{this.setVisibality(e)}, true);\r\n      this.overlay.addEventListener('transitionend',(e) =>{this.handleZindex(e)},false);\r\n      this.overlay.addEventListener('click',() =>{this.close()},false);\r\n      this.setVisibality();\r\n    },\r\n    methods:{\r\n      setVisibality(){\r\n        this.visible = this.element.offsetWidth !== 0;\r\n      },\r\n      handleStart(e){\r\n        this.startTime = new Date().getTime();\r\n        this.startPos = e.targetTouches[0].pageX;\r\n        this.element.style.transitionDuration = this.manual_speed;\r\n      },\r\n      handleMove(e){\r\n        let gesture = this.direction === 'bottom' ? this.gestureY(e) : this.gesture(e);\r\n        let valid = this.validate(this.direction,gesture);\r\n        if(valid){\r\n          let percent = this.percentage(this.direction,gesture);\r\n          if(this.direction === 'left'){\r\n            /* touch scroll-y 튕김 방지 */\r\n            let oldY = this.moving.y;\r\n            let currentY = e.touches[0].pageY;\r\n            let offsetY = oldY - currentY;\r\n            if (offsetY<0) return;\r\n\r\n            /* 터치 감도 조정 코드\r\n            let oldX = this.moving.x;\r\n            let currentX = e.touches[0].pageX;\r\n            let offsetX = oldX - currentX;\r\n            if (offsetX>offsetY) return; */\r\n\r\n            this.translate = (e.touches[0].pageX-this.element.offsetWidth);\r\n            if(this.translate < 0){\r\n              this.element.style.transform = 'translate3d('+ this.translate +'px,0,0)';\r\n            }else{\r\n              this.open();\r\n            }\r\n          } else if(this.direction === 'right'){\r\n            /* touch scroll-y 튕김 방지 */\r\n            let oldY = this.moving.y;\r\n            let currentY = e.touches[0].pageY;\r\n            let offsetY = oldY - currentY;\r\n            if (offsetY<0) return;\r\n\r\n            this.translate = -(screen.width-this.element.offsetWidth-e.touches[0].pageX);\r\n            if(this.translate > 0){\r\n              this.element.style.transform = 'translate3d('+ this.translate +'px,0,0)';\r\n            }else{\r\n              this.open();\r\n            }\r\n          } else if(this.display === 'bottom'){\r\n            this.translate = -(screen.height-this.bottomHeight-e.touches[0].pageY);\r\n            if(this.translate > 0){\r\n              this.element.style.transform = 'translate3d(0,'+ this.translate +'px,0)';\r\n            }else{\r\n              this.open();\r\n            }\r\n          }\r\n          this.overlayOpacity(percent/100);\r\n\r\n          this.moving.x = e.touches[0].pageX;\r\n          this.moving.y = e.touches[0].pageY;\r\n        }\r\n      },\r\n      handleEnd(e){\r\n        let speed = this.speed(e);\r\n        let gesture = this.direction === 'bottom' ? this.gestureY(e) : this.gesture(e);\r\n        let valid = this.validate(this.direction,gesture);\r\n        if(valid){\r\n          if(speed>0.6){\r\n            if(!this.active){\r\n              this.open();\r\n            }else{\r\n              this.close();\r\n            }\r\n          }else{\r\n            if(this.direction === 'bottom') {\r\n              if(this.bottomHeight/2>Math.abs(this.translate)) {\r\n                this.open();\r\n              }else{\r\n                this.close();\r\n              }\r\n            }\r\n            else if(this.element.offsetWidth/2>Math.abs(this.translate)){\r\n              this.open();\r\n            }else{\r\n              this.close();\r\n            }\r\n          }\r\n        }\r\n      },\r\n      handleZindex(){\r\n        let opacity = window.getComputedStyle(this.overlay).getPropertyValue('opacity');\r\n        if(opacity<=0){\r\n          this.overlay.style.zIndex = -999;\r\n        }\r\n      },\r\n      validate(direction,gesture){\r\n        if(direction === 'left'){\r\n          if((this.active && gesture === 'swiperight') || (!this.active && (gesture === 'swipeleft' || this.startPos>this.threshold))){\r\n            return false;\r\n          }\r\n        } else if(direction === 'right'){\r\n          if((this.active && gesture === 'swipeleft') || (!this.active && (gesture === 'swiperight' || this.startPos<(screen.width-this.threshold)))){\r\n            return false;\r\n          }\r\n        } else if(direction === 'bottom'){\r\n          if((this.active && gesture === 'swipebottom') || (!this.active && (gesture === 'swipebottom' || this.startPos<(screen.height-this.threshold)))){\r\n            return false;\r\n          }\r\n        }\r\n        if((document.querySelector('.sidebar.active') && !this.active) || !this.visible){\r\n          return false;\r\n        }\r\n        return true;\r\n      },\r\n      overlayOpacity(opacity){\r\n        this.overlay.style.opacity = opacity;\r\n        if(opacity > 0){\r\n          this.overlay.style.zIndex = 999;\r\n        }\r\n      },\r\n      gesture(e){\r\n        let directions = [\r\n          'swipeleft',\r\n          'swiperight'\r\n        ];\r\n        let currentPos = e.changedTouches[0].pageX;\r\n        if((this.startPos-currentPos)<0){\r\n          return directions[1];\r\n        }else{\r\n          return directions[0];\r\n        }\r\n      },\r\n      gestureY(e){\r\n        let directions = [\r\n          'swipetop',\r\n          'swipebottom'\r\n        ];\r\n        let currentPos = e.changedTouches[0].pageY;\r\n        if((this.startPos-currentPos)<0){\r\n          return directions[1];\r\n        }else{\r\n          return directions[0];\r\n        }\r\n      },\r\n      open(){\r\n        this.translate = 0;\r\n        if(this.direction === 'bottom') {\r\n          let height = window.innerHeight - this.bottomHeight;\r\n          this.element.style.transform = 'translate3d(0,'+height+'px,0)';\r\n        } else {\r\n          this.element.style.transform = 'translate3d('+this.translate+',0,0)';\r\n        }\r\n        this.element.style.transitionDuration = this.auto_speed;\r\n        this.overlayOpacity(1);\r\n        this.lock(document.querySelector('html'));\r\n        this.lock(document.querySelector('body'));\r\n        this.element.classList.add('active');\r\n        this.active = true;\r\n\r\n        this.moving = { x: null, y: null };        \r\n      },\r\n      close(){\r\n        if(this.direction === 'left'){\r\n          this.translate = '-'+this.element.offsetWidth+'px';\r\n        } else if(this.direction === 'right'){\r\n          this.translate = this.element.offsetWidth+'px';\r\n        }  else if(this.direction === 'bottom'){\r\n          this.translate = screen.height + 'px';\r\n        }\r\n\r\n        if(this.direction === 'bottom') {\r\n          this.element.style.transform = 'translate3d(0,'+this.translate+',0)';\r\n        } else {\r\n          this.element.style.transform = 'translate3d('+this.translate+',0,0)';\r\n        }\r\n        this.element.style.transitionDuration = this.auto_speed;\r\n        this.overlayOpacity(0);\r\n        this.unlock(document.querySelector('html'));\r\n        this.unlock(document.querySelector('body'));\r\n        this.element.classList.remove('active');\r\n        this.active = false;\r\n\r\n        this.moving = { x: null, y: null };\r\n      },\r\n      speed(e){\r\n        let time = new Date().getTime() - this.startTime;\r\n        let startP = Math.abs(this.startPos);\r\n        let endP =  this.direction === 'bottom' ? Math.abs(e.changedTouches[0].pageY) : Math.abs(e.changedTouches[0].pageX);\r\n        let distance = startP>endP? (startP-endP):(endP-startP);\r\n        return distance/time;\r\n      },\r\n      percentage(direction,gesture){\r\n        let percentage = 0;\r\n        let test = [];\r\n        if(direction === 'left'){\r\n          test = ['swipeleft','swiperight']\r\n        } else if(direction === 'right'){\r\n          test = ['swiperight','swipeleft']\r\n        } else if(direction === 'bottom'){\r\n          test = ['swipebottom','swipetop']\r\n        }\r\n        let size = direction === 'bottom' ? 'offsetHeight' : 'offsetWidth';\r\n        if(this.active && gesture === test[0]){\r\n          percentage = 100-Math.round(Math.abs(this.translate)/this.element[size]*100);\r\n        }\r\n        if(!this.active && gesture === test[1]){\r\n          percentage = Math.round(100-Math.abs(this.translate)/this.element[size]*100);\r\n        }\r\n        if(percentage>100){\r\n          percentage = 100;\r\n        }\r\n        if(percentage<0){\r\n          percentage = 0;\r\n        }\r\n        return percentage;\r\n      },\r\n      lock(element){\r\n        element.style.overflow = 'hidden';\r\n        element.style.touchAction = 'none';\r\n      },\r\n      unlock(element){\r\n        element.style.removeProperty('overflow');\r\n        element.style.removeProperty('touch-action');\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style scoped>\r\n  div.overlay{\r\n    position:fixed;\r\n    z-index: -999;\r\n    left: 0px;\r\n    top:0px;\r\n    background:rgba(11, 10, 12, 0.35);\r\n    opacity: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    transition: opacity 0.3s ease;\r\n  }\r\n  aside.sidebar{\r\n    z-index: 9999;\r\n    position: fixed;\r\n    will-change: transform;\r\n    height: 100%;\r\n    top: 0px;\r\n    transition:transform 0.3s ease;\r\n    background:#fff;\r\n    min-width: 300px;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    word-wrap: break-word;\r\n  }\r\n</style>"],"sourceRoot":"src/components/Components/Common"}]}