{"remainingRequest":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js!/Users/mard/dev/grit12/node_modules/eslint-loader/index.js??ref--13-0!/Users/mard/dev/grit12/src/api/product.js","dependencies":[{"path":"/Users/mard/dev/grit12/src/api/product.js","mtime":1605259959000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.keys\";\nvar api_product = {};\nimport * as helper from \"./api_helper\";\n/***\r\n 상품\r\n */\n\n/***\r\n * 상품 필드\r\n */\n\nfunction productField() {\n  var base = 'id,img,name,simple_desc,tags,form,order_conversion_type,payment_type';\n  var category = ',category1,category2,category3';\n  var count = ',rate,stock,input,like_count,reviews_count,visit';\n  var price = ',price,sum_price,enable_day_price,is_expired';\n  var partner = ',partner';\n  var address = ',address,dong,distance';\n  var params = ',params,imgs,info,operating_time,phone,rates,common_info,selectors,discount_time,maximum,minimum';\n  return \"fields=\".concat(base + category + count + price + partner + address + params);\n}\n/***\r\n * 위, 경도\r\n */\n\n\nfunction location(vm) {\n  return !vm.$store.getters.currentPosition ? '' : \"location=\".concat(vm.$store.getters.currentPosition.lng, \",\").concat(vm.$store.getters.currentPosition.lat);\n}\n/***\r\n * 카테고리\r\n */\n\n\nfunction category(params) {\n  return params && category ? \"category=\".concat(params.category) : '';\n}\n/***\r\n * 상품 목록\r\n * @param {Object} params - page_length(Number): 페이지 길이, ordering(String): 정렬\r\n */\n\n\napi_product.Product = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    var url = \"\".concat(helper.mapper_auth(vm), \"/mapping/product?\").concat(productField(), \"&\").concat(category(params), \"&\").concat(helper.pageLength(params), \"&\").concat(helper.ordering(params));\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 목록 - 위치 정렬\r\n * @param {Object} params - page_length(Number): 페이지 길이, ordering(String): 정렬\r\n */\n\n\napi_product.ProductLocation = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    var url = \"\".concat(helper.mapper_auth(vm), \"/mapping/product?\").concat(productField(), \"&\").concat(helper.pageLength(params), \"&\").concat(category(params), \"&\").concat(helper.ordering({\n      ordering: 'distance'\n    }), \"&\").concat(location(vm));\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 상세\r\n * @param {Object} params - id(Number): 상품 id. 기본값 $route.query.id\r\n */\n\n\napi_product.ProductDetail = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    // id 기본값 $route.query.id, 옵션 params.id\n    var id = params && params.id ? params.id : vm.$route.query.id;\n    var resv = params && params.resv ? params.resv : {};\n    var url = \"\".concat(helper.mapper_auth(vm), \"/mapping/product/\").concat(id, \"?\").concat(productField());\n\n    if (Object.keys(resv).length !== 0) {\n      url += \"&resv_start=\".concat(resv.resv_date, \"&resv_end=\").concat(resv.resv_end_date);\n    }\n\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 태그 목록\r\n ***/\n\n\napi_product.ProductTags = function (vm) {\n  return new Promise(function (resolve, reject) {\n    var url = \"public/product/tags\";\n    vm.$axios.get(url).then(function (res) {\n      resolve(res);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 인기 태그 목록\r\n * @param {Object} params - num(Number): 태그 갯수. 기본값 10\r\n ***/\n\n\napi_product.ProductPopluarTags = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    var url = \"public/product/tags/popular?num=\".concat(params && params.num ? params.num : 10);\n    vm.$axios.get(url).then(function (res) {\n      resolve(res);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 태그 호출 로그 남기기\r\n * @param {Object} params - tag(String): 태그명\r\n */\n\n\napi_product.CreateProductTag = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    var url = \"public/product/tag/log\";\n    if (helper.validParams(reject, params, 'tag')) return;\n\n    if (!params || !params.tag) {\n      reject('parameter에 tag가 없습니다');\n      return;\n    }\n\n    vm.$axios.post(url, {\n      tag: params.tag\n    }).then(function (res) {\n      resolve(res);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 문의 목록\r\n * @param {Object} params - id(Number): 상품 id\r\n */\n\n\napi_product.ProductInquiry = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    if (helper.validParams(reject, params, 'id')) return;\n    var url = \"\".concat(helper.auth(vm), \"/product/\").concat(params.id, \"/inquiry\");\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 후기 목록\r\n * @param {Object} params - id(Number): 상품 id\r\n */\n\n\napi_product.ProductReview = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    if (helper.validParams(reject, params, 'id')) return;\n    var url = \"\".concat(helper.auth(vm), \"/product/\").concat(params.id, \"/review\");\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 문의, 후기 갯수\r\n * @param {Object} params - id(Number): 상품 id\r\n */\n\n\napi_product.ProductReviewInquiryCount = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    if (helper.validParams(reject, params, 'id')) return;\n    var url = \"\".concat(helper.auth(vm), \"/product/\").concat(params.id, \"/reviewinquiry/count\");\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 상품 후기 좋아요 수\r\n * @param {Object} params - id(Number): 상품 id, review_id(Number): 후기 id\r\n */\n\n\napi_product.ProductReviewLikeCount = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    if (helper.validParams(reject, params, 'id')) return;\n    if (helper.validParams(reject, params, 'review_id')) return;\n    var url = \"\".concat(helper.auth(vm), \"/product/\").concat(params.id, \"/review/\").concat(params.review_id, \"/like/count\");\n    vm.$axios.get(url).then(function (res) {\n      resolve(res.data);\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n/***\r\n * 기획전 상품 목록\r\n * @param {Object} params - id : 기획전 id\r\n *\r\n ***/\n\n\napi_product.ProductExhibition = function (vm, params) {\n  return new Promise(function (resolve, reject) {\n    if (helper.validParams(reject, params, 'id')) return;\n    var url = \"\".concat(helper.auth(vm), \"/exhibition/\").concat(params.id);\n    vm.$axios.get(url).then(function (res) {\n      resolve({\n        data: res.data.product_list\n      });\n    }).catch(function (err) {\n      reject(err.response.data);\n    });\n  });\n};\n\nexport default api_product;",{"version":3,"sources":["/Users/mard/dev/grit12/src/api/product.js"],"names":["api_product","helper","productField","base","category","count","price","partner","address","params","location","vm","$store","getters","currentPosition","lng","lat","Product","Promise","resolve","reject","url","mapper_auth","pageLength","ordering","$axios","get","then","res","data","catch","err","response","ProductLocation","ProductDetail","id","$route","query","resv","Object","keys","length","resv_date","resv_end_date","ProductTags","ProductPopluarTags","num","CreateProductTag","validParams","tag","post","ProductInquiry","auth","ProductReview","ProductReviewInquiryCount","ProductReviewLikeCount","review_id","ProductExhibition","product_list"],"mappings":"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","sourcesContent":["let api_product = {};\r\nimport * as helper from './api_helper'\r\n\r\n/***\r\n 상품\r\n */\r\n\r\n/***\r\n * 상품 필드\r\n */\r\nfunction productField() {\r\n  let base = 'id,img,name,simple_desc,tags,form,order_conversion_type,payment_type';\r\n  let category = ',category1,category2,category3';\r\n  let count = ',rate,stock,input,like_count,reviews_count,visit';\r\n  let price = ',price,sum_price,enable_day_price,is_expired';\r\n  let partner = ',partner';\r\n  let address = ',address,dong,distance';\r\n  let params = ',params,imgs,info,operating_time,phone,rates,common_info,selectors,discount_time,maximum,minimum';\r\n\r\n  return `fields=${base + category + count + price + partner + address + params }`;\r\n}\r\n\r\n/***\r\n * 위, 경도\r\n */\r\nfunction location(vm) {\r\n  return !vm.$store.getters.currentPosition ? '' :\r\n    `location=${vm.$store.getters.currentPosition.lng},${vm.$store.getters.currentPosition.lat}`;\r\n}\r\n\r\n/***\r\n * 카테고리\r\n */\r\nfunction category(params) {\r\n  return params && category ? `category=${params.category}` : '';\r\n}\r\n\r\n\r\n/***\r\n * 상품 목록\r\n * @param {Object} params - page_length(Number): 페이지 길이, ordering(String): 정렬\r\n */\r\napi_product.Product = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    let url = `${helper.mapper_auth(vm)}/mapping/product?${productField()}&${category(params)}&${helper.pageLength(params)}&${helper.ordering(params)}`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 목록 - 위치 정렬\r\n * @param {Object} params - page_length(Number): 페이지 길이, ordering(String): 정렬\r\n */\r\napi_product.ProductLocation = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    let url = `${helper.mapper_auth(vm)}/mapping/product?${productField()}&${helper.pageLength(params)}&${category(params)}&${helper.ordering({ordering: 'distance'})}&${location(vm)}`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 상세\r\n * @param {Object} params - id(Number): 상품 id. 기본값 $route.query.id\r\n */\r\napi_product.ProductDetail = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    // id 기본값 $route.query.id, 옵션 params.id\r\n    let id = params && params.id ? params.id : vm.$route.query.id;\r\n    let resv = params && params.resv ? params.resv : {};\r\n    let url = `${helper.mapper_auth(vm)}/mapping/product/${id}?${productField()}`;\r\n    if (Object.keys(resv).length !== 0) {\r\n      url += `&resv_start=${resv.resv_date}&resv_end=${resv.resv_end_date}`;\r\n    }\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 태그 목록\r\n ***/\r\napi_product.ProductTags = function(vm) {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    let url = `public/product/tags`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 인기 태그 목록\r\n * @param {Object} params - num(Number): 태그 갯수. 기본값 10\r\n ***/\r\napi_product.ProductPopluarTags = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    let url = `public/product/tags/popular?num=${params && params.num ? params.num : 10}`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n\r\n/***\r\n * 상품 태그 호출 로그 남기기\r\n * @param {Object} params - tag(String): 태그명\r\n */\r\napi_product.CreateProductTag = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n\r\n    let url = `public/product/tag/log`;\r\n\r\n    if(helper.validParams(reject, params, 'tag')) return;\r\n\r\n    if(!params || !params.tag) {\r\n      reject('parameter에 tag가 없습니다');\r\n      return;\r\n    }\r\n\r\n    vm.$axios.post(url, {tag: params.tag}).then(res => {\r\n      resolve(res);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 문의 목록\r\n * @param {Object} params - id(Number): 상품 id\r\n */\r\napi_product.ProductInquiry = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    if(helper.validParams(reject, params, 'id')) return;\r\n\r\n    let url = `${helper.auth(vm)}/product/${params.id}/inquiry`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 후기 목록\r\n * @param {Object} params - id(Number): 상품 id\r\n */\r\napi_product.ProductReview = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    if(helper.validParams(reject, params, 'id')) return;\r\n\r\n    let url = `${helper.auth(vm)}/product/${params.id}/review`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 문의, 후기 갯수\r\n * @param {Object} params - id(Number): 상품 id\r\n */\r\napi_product.ProductReviewInquiryCount = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    if(helper.validParams(reject, params, 'id')) return;\r\n\r\n    let url = `${helper.auth(vm)}/product/${params.id}/reviewinquiry/count`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n/***\r\n * 상품 후기 좋아요 수\r\n * @param {Object} params - id(Number): 상품 id, review_id(Number): 후기 id\r\n */\r\napi_product.ProductReviewLikeCount = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    if(helper.validParams(reject, params, 'id')) return;\r\n    if(helper.validParams(reject, params, 'review_id')) return;\r\n\r\n    let url = `${helper.auth(vm)}/product/${params.id}/review/${params.review_id}/like/count`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve(res.data);\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\n\r\n\r\n/***\r\n * 기획전 상품 목록\r\n * @param {Object} params - id : 기획전 id\r\n *\r\n ***/\r\napi_product.ProductExhibition = function(vm, params) {\r\n  return new Promise((resolve, reject) => {\r\n    if(helper.validParams(reject, params, 'id')) return;\r\n\r\n    let url = `${helper.auth(vm)}/exhibition/${params.id}`;\r\n\r\n    vm.$axios.get(url).then(res => {\r\n      resolve({data: res.data.product_list});\r\n    }).catch(err => {\r\n      reject(err.response.data);\r\n    });\r\n  });\r\n}\r\n\r\nexport default api_product;"]}]}