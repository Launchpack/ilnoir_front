{"remainingRequest":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js!/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/grit12/src/components/Pages/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mard/dev/grit12/src/components/Pages/Search.vue","mtime":1605260017000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.index-of\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport PageHeaderMobile from \"@/components/Components/Common/PageHeaderMobile\";\nimport CardProduct from \"@/components/Components/Card/CardProduct\";\nimport PageMixin from \"@/components/Components/Mixin/PageMixin\";\nimport HeaderMixin from \"@/components/Mixins/HeaderMixin\";\nimport ListMixin from \"@/components/Mixins/ListMixin\";\nexport default {\n  name: 'Search',\n  components: {\n    PageHeaderMobile: PageHeaderMobile,\n    CardProduct: CardProduct\n  },\n  mixins: [PageMixin, HeaderMixin, ListMixin],\n  props: {},\n  data: function data() {\n    return {\n      \"list\": undefined,\n      \"sorted\": {\n        \"value\": \"\"\n      },\n      \"address\": undefined,\n      \"dropdown\": {\n        \"isOpen\": false,\n        \"options\": [],\n        \"selected\": {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        \"mouseOverIndex\": -1\n      },\n      \"setAddress\": undefined,\n      \"searchValue\": \"\",\n      \"sortOptions\": undefined,\n      \"selectedCategory\": \"\",\n      \"headerCenterStyle\": {}\n    };\n  },\n  created: function created() {\n    this.setCategoryName();\n    this.init();\n  },\n  updated: function updated() {\n    // 현재 카테고리\n    this.setCategoryName();\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.pageLoadType = 'infinite';\n      this.headerCenterStyle = {\n        position: 'static',\n        transform: 'none',\n        left: 0\n      };\n      var filterId = 1;\n\n      if (this.$store.getters.commonFilter) {\n        filterId = this.$store.getters.commonFilter.productFilter;\n      }\n\n      this.$axios.get(\"public/service/set/filter/\".concat(filterId)).then(function (res) {\n        _this.sortOptions = res.data.sort; // active 필터링            \n\n        _this.sortOptions = _this.sortOptions.filter(function (item) {\n          return item.is_active;\n        }); // '거리순' 초기값 설정\n\n        var distance = find(_this.sortOptions, 'value', 'distance');\n\n        if (distance) {\n          var rmIdx = _this.sortOptions.indexOf(distance);\n\n          _this.sortOptions.splice(rmIdx, 1);\n\n          _this.sortOptions.unshift(distance);\n\n          _this.sorted = 'distance';\n        } // 정렬옵션 initialize\n\n\n        if (_this.sortOptions && _this.sortOptions.length > 0) {\n          _this.dropdown.options = _this.sortOptions;\n          _this.dropdown.selected = _this.dropdown.options[0];\n        }\n\n        _this.getData();\n      });\n\n      if (this.$route.query.search_tag) {\n        this.searchValue = this.$route.query.search_tag;\n      }\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      var location = '';\n      if (this.$store.getters.currentPosition === undefined) location = '';else {\n        location = \"\".concat(this.$store.getters.currentPosition.lng, \",\").concat(this.$store.getters.currentPosition.lat);\n      }\n      var sorting = '';\n\n      if (typeof this.sorted === 'string' && this.sorted !== '') {\n        sorting = {\n          value: this.sorted.replace('-visit', '-partner__visit').replace('-pop_score', '-partner__pop_score')\n        };\n      } // 필터 정렬 사용X\n      // else {\n      //   sorting = this.$store.getters.sorted;\n      // }\n\n\n      this.url = this.urlAppendFilter(this.$store.getters.filtered, sorting, \"user/\".concat(this.user.user_id, \"/mapping/product?fields=id,name,img,like_count,shared_count,visit,simple_desc,rate,reviews_count,partner,products.category\") + '&search_keyword=' + encodeURI(this.searchValue));\n      this.url += '&page_num=1&page_length=12';\n      this.url += \"&location=\".concat(location);\n\n      if (Number(this.$route.query.gnb)) {\n        this.url += \"&category=\".concat(this.$route.query.gnb);\n      } else {\n        this.url += '&category=';\n      }\n\n      this.currentPage = 1;\n      this.$axios.get(this.url).then(function (res) {\n        _this2.totalPages = res.data.total_page;\n        _this2.totalCount = res.data.count;\n        _this2.currentPage = 2;\n        _this2.list = res.data.data;\n      });\n    },\n    setCategoryName: function setCategoryName() {\n      var _this3 = this;\n\n      var menu = this.$store.getters.brand.menu_set.filter(function (item) {\n        return item.name === 'GNB';\n      });\n\n      if (menu && menu.length > 0 && this.$route.query.gnb) {\n        var sel = menu[0].menu.filter(function (item) {\n          return item.id === Number(_this3.$route.query.gnb);\n        })[0];\n\n        if (sel) {\n          this.selectedCategory = sel.name;\n        } else this.selectedCategory = '';\n      }\n    },\n    onSelectSorted: function onSelectSorted(val) {\n      this.sorted = val;\n      this.getData();\n    },\n    updatePosition: function updatePosition() {\n      this.getData();\n    },\n    onVMap: function onVMap(value) {\n      if (value) {\n        this.headerCenterStyle = {\n          position: 'absolute',\n          transform: 'none',\n          left: 0\n        };\n      } else {\n        this.headerCenterStyle = {\n          position: 'static',\n          transform: 'none',\n          left: 0\n        };\n      }\n    },\n    // 정렬 옵션 드롭다운\n    toggleList: function toggleList() {\n      this.dropdown.isOpen = !this.dropdown.isOpen;\n    },\n    closeDropdown: function closeDropdown() {\n      this.dropdown.isOpen = false;\n    },\n    clickItem: function clickItem(item) {\n      this.dropdown.selected = item;\n      this.dropdown.isOpen = false; // this.$emit('selectSorted', item.value);\n\n      this.onSelectSorted(item.value);\n    },\n    itemStyle: function itemStyle(idx) {\n      if (this.dropdown.mouseOverIndex == idx) {\n        return {\n          color: this.brandColor.primary.color\n        };\n      } else {\n        return {\n          color: this.brandColor.main.color\n        };\n      }\n    },\n    cardStyle: function cardStyle(idx) {\n      var obj = {};\n      var gutters = this.$store.getters.brand.layout_gutters;\n      obj.paddingLeft = \"\".concat(gutters / 2, \"px\");\n      obj.paddingRight = \"\".concat(gutters / 2, \"px\");\n      obj.paddingBottom = \"\".concat(gutters, \"px\");\n      if (idx % 2 === 0) obj.paddingLeft = 0;else if (idx % 2 === 1) obj.paddingRight = 0;\n      return obj;\n    }\n  },\n  computed: {\n    pageBg: function pageBg() {\n      return this.brandBgColor.main;\n    },\n    currentAddress: function currentAddress() {\n      // 현재 주소\n      var add = this.address;\n\n      if (add && add.sido && add.sigungu) {\n        return \"\".concat(add.sido, \" \").concat(add.sigungu);\n      } else return '';\n    },\n    containerStyle: function containerStyle() {\n      return {\n        minHeight: 'calc(100vh - 50px)'\n      };\n    },\n    filtered: function filtered() {\n      return this.$store.getters.filtered.length > 0;\n    },\n    inputStyle: function inputStyle() {\n      return {\n        border: 'none',\n        width: '100%',\n        height: '48px',\n        backgroundColor: 'white',\n        padding: '12px 40px 12px 20px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        borderRadius: '12px',\n        fontSize: '14px'\n      };\n    },\n    iconSearchStyle: function iconSearchStyle() {\n      return {\n        position: 'absolute',\n        top: '12px',\n        right: '16px'\n      };\n    },\n    btnStyles: function btnStyles() {\n      return {\n        container: {\n          // backgroundColor: 'white',\n          // color: this.brandColor.primary.color,\n          color: '#fff',\n          fontWeight: 400\n        }\n      };\n    },\n    unsetCenter: function unsetCenter() {\n      return {\n        position: 'static',\n        transform: 'none',\n        left: 0\n      };\n    },\n    selectedTabStyle: function selectedTabStyle() {\n      return {\n        padding: '12px 16px 11px',\n        textAlign: 'center',\n        fontSize: '14px',\n        borderTop: this.brandBorder.main.border,\n        borderBottom: \"2px solid \".concat(this.brandColor.primary.color),\n        backgroundColor: '#fff',\n        color: this.brandColor.primary.color\n      };\n    },\n    unselectedTabStyle: function unselectedTabStyle() {\n      return {\n        padding: '12px 16px',\n        textAlign: 'center',\n        fontSize: '14px',\n        color: this.brandColor.main.color,\n        backgroundColor: '#fff',\n        borderTop: this.brandBorder.main.border\n      };\n    }\n  },\n  watch: {\n    '$route.query.gnb': function $routeQueryGnb(n) {\n      this.setCategoryName();\n      this.getData();\n    }\n  }\n};",{"version":3,"sources":["Search.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n<div :style=\"[containerStyle, pageBg]\">\n    \n    <page-header-mobile @currentAddress=\"val=>address=val\"></page-header-mobile>\n    \n    <div>\n\n          <!-- 검색된 상품 목록 -->\n          <list-vertical :style=\"pagePadding\">\n\n            <!-- 검색창 -->\n            <div slot=\"above-sort\" class=\"position-relative full-width\" style=\"margin: 24px 0;\">\n              <input :style=\"inputStyle\" type=\"text\" placeholder=\"검색어를 입력하세요\"\n                     :value=\"searchValue\" @input=\"e => searchValue = e.target.value\" @keyup.enter=\"getData\">\n              <i class=\"material-icons unselect\" :style=\"iconSearchStyle\" @click=\"getData\">search</i>\n            </div>\n            \n            <div slot=\"middle-content\" class=\"flex-between\" style=\"align-items: flex-end; margin-bottom:16px;\">\n              \n              <div>\n                <div v-if=\"selectedCategory\" class=\"size-20 weight-500\" :style=\"brandColor.main\">{{ selectedCategory }}</div>\n                <div class=\"size-14\" :style=\"brandColor.sub\">{{ currentAddress }}의 상품들</div>\n              </div>\n              \n              <!-- 정렬 드롭다운 -->\n              <div class=\"size-12 weight-500\" :style=\"brandColor.main\" style=\"min-width:84px;\"\n                v-click-outside=\"closeDropdown\">\n                <div class=\"dropdown flex-center unselect\" :style=\"brandBgColor.white\" style=\"z-index:1\"\n                  @click.stop.prevent=\"toggleList\">\n                  \n                  <!--선택된 값-->\n                  <i class=\"material-icons\" style=\"font-size: 20px; margin-right:2px;\"\n                    :style=\"{color: dropdown.isOpen ? brandColor.primary.color : brandColor.main.color}\"\n                    >sort</i>\n                  <div v-if=\"dropdown.selected\"\n                    :style=\"{color: dropdown.isOpen ? brandColor.primary.color : brandColor.main.color}\"\n                    >{{ dropdown.selected.label }}</div>\n                    \n                  <!--리스트-->\n                  <ul v-if=\"dropdown.isOpen\" class=\"dropdown-ul position-absolute\" :style=\"brandBgColor.white\">\n                    <li class=\"dropdown-item\" style=\"padding: 8px 12px;\"\n                        v-for=\"(item, idx) in dropdown.options\" :key=\"idx\"\n                        :style=\"itemStyle(idx)\"\n                        @click.stop.prevent=\"clickItem(item)\"\n                        @mouseover.stop.prevent=\"dropdown.mouseOverIndex=idx\"\n                        @mouseleave.stop.prevent=\"dropdown.mouseOverIndex=-1\">\n                      {{ item.label }}\n                    </li>\n                  </ul>\n                  \n                </div>\n              </div>\n            </div>\n\n            <div slot=\"card\" v-if=\"list\" style=\"min-height: 252px;\">\n            <transition-group name=\"fade\" tag=\"div\" class=\"grid-box\">\n                <card-product \n                  v-for=\"(item,idx) in list\"\n                  class=\"col-6\"\n                  :style=\"cardStyle(idx)\"\n                  :key=\"`card-prod-${item.id}-${idx}`\"\n                  :card=\"item\"></card-product>\n            </transition-group>\n            </div>\n            \n          </list-vertical>\n\n          <div v-if=\"list && list.length===0\"\n              class=\"empty-view\"\n              :style=\"brandColor.sub\">검색 결과가 없습니다.</div>\n\n\n    </div>\n    \n  </div>\n</template>\n<script>\nimport PageHeaderMobile from \"@/components/Components/Common/PageHeaderMobile\"\nimport CardProduct from \"@/components/Components/Card/CardProduct\"\nimport PageMixin from \"@/components/Components/Mixin/PageMixin\"\nimport HeaderMixin from \"@/components/Mixins/HeaderMixin\"\nimport ListMixin from \"@/components/Mixins/ListMixin\"\n\nexport default {\n  name: 'Search',\n  components: {\n    PageHeaderMobile,\n    CardProduct\n  },\n  mixins: [\n    PageMixin,\n    HeaderMixin,\n    ListMixin\n  ],\n  props: {\n\n  },\n  data() {\n    return {\n      \"list\": undefined,\n      \"sorted\": {\n        \"value\": \"\"\n      },\n      \"address\": undefined,\n      \"dropdown\": {\n        \"isOpen\": false,\n        \"options\": [],\n        \"selected\": {\n          \"label\": \"\",\n          \"value\": \"\"\n        },\n        \"mouseOverIndex\": -1\n      },\n      \"setAddress\": undefined,\n      \"searchValue\": \"\",\n      \"sortOptions\": undefined,\n      \"selectedCategory\": \"\",\n      \"headerCenterStyle\": {}\n    }\n  },\n  created() {\n    this.setCategoryName();\n    this.init();\n  },\n  updated() {\n    // 현재 카테고리\n    this.setCategoryName();\n  },\n  \n  methods: {\n    init() {\n        this.pageLoadType = 'infinite';\n        \n        this.headerCenterStyle = {\n          position: 'static',\n          transform: 'none',\n          left: 0\n        };      \n\n        let filterId = 1;\n        if (this.$store.getters.commonFilter) {\n          filterId = this.$store.getters.commonFilter.productFilter;\n        }\n        this.$axios.get(`public/service/set/filter/${filterId}`)\n        .then(res =>{\n          \n          this.sortOptions = res.data.sort;\n\n          // active 필터링            \n          this.sortOptions = this.sortOptions.filter(item => item.is_active);\n          \n          // '거리순' 초기값 설정\n          let distance = find(this.sortOptions, 'value', 'distance');\n          if (distance) {\n            let rmIdx = this.sortOptions.indexOf(distance);\n            this.sortOptions.splice(rmIdx,1);\n            this.sortOptions.unshift(distance);\n            this.sorted = 'distance'\n          }\n          \n          // 정렬옵션 initialize\n          if(this.sortOptions && this.sortOptions.length>0) {\n            this.dropdown.options = this.sortOptions;\n            this.dropdown.selected =this.dropdown.options[0];\n          }         \n\n          this.getData();\n        });\n\n\n        if(this.$route.query.search_tag) {\n          this.searchValue = this.$route.query.search_tag;\n        }\n\n      },\n    getData() {\n        let location = '';\n        if (this.$store.getters.currentPosition===undefined) location = '';\n        else {\n          location = `${this.$store.getters.currentPosition.lng},${this.$store.getters.currentPosition.lat}`;\n        }\n\n        let sorting = ''\n        if (typeof(this.sorted)==='string' && this.sorted !== '') {\n          sorting = {\n            value: this.sorted.replace('-visit', '-partner__visit').replace('-pop_score', '-partner__pop_score')\n          }\n        }\n        \n        // 필터 정렬 사용X\n        // else {\n        //   sorting = this.$store.getters.sorted;\n        // }\n\n        this.url = this.urlAppendFilter(this.$store.getters.filtered, sorting,\n          `user/${this.user.user_id}/mapping/product?fields=id,name,img,like_count,shared_count,visit,simple_desc,rate,reviews_count,partner,products.category` +\n          '&search_keyword=' + encodeURI(this.searchValue));\n        \n        this.url += '&page_num=1&page_length=12';\n        this.url += `&location=${location}`;\n        \n        if(Number(this.$route.query.gnb)) {\n          this.url += `&category=${this.$route.query.gnb}`;\n        }\n        else {\n          this.url += '&category=';\n        }\n\n        this.currentPage = 1;\n\n        this.$axios.get(this.url).then(res => {\n          this.totalPages = res.data.total_page;\n          this.totalCount = res.data.count;\n          this.currentPage = 2;\n          this.list = res.data.data;\n        });\n      },\n    setCategoryName() {\n      let menu = this.$store.getters.brand.menu_set.filter(item => { return item.name === 'GNB' });\n      if(menu && menu.length>0 && this.$route.query.gnb) {\n        let sel = menu[0].menu.filter(item => { return item.id === Number(this.$route.query.gnb) })[0];\n        if (sel) {\n          this.selectedCategory = sel.name;\n        }\n        else this.selectedCategory = '';\n      }\n    },\n    onSelectSorted(val) {\n        this.sorted = val;\n        this.getData();\n      },\n    updatePosition() {\n        this.getData();\n      },\n    onVMap(value) {\n        if (value) {\n          this.headerCenterStyle = {\n            position: 'absolute',\n            transform: 'none',\n            left: 0\n          };\n        }\n        else {\n          this.headerCenterStyle = {\n            position: 'static',\n            transform: 'none',\n            left: 0\n          };\n        }\n      },\n    // 정렬 옵션 드롭다운\n    toggleList() {\n      this.dropdown.isOpen = !this.dropdown.isOpen;\n    },\n    closeDropdown() {\n      this.dropdown.isOpen = false;\n    },\n    clickItem(item) {\n      this.dropdown.selected = item;\n      this.dropdown.isOpen = false;\n      // this.$emit('selectSorted', item.value);\n      this.onSelectSorted(item.value);\n    },\n    itemStyle(idx) {\n      if (this.dropdown.mouseOverIndex==idx) {\n        return {\n          color: this.brandColor.primary.color\n        }\n      }\n      else {\n        return {\n          color: this.brandColor.main.color\n        }\n      }\n    },\n    cardStyle(idx) {\n      let obj = {}\n      \n      let gutters = this.$store.getters.brand.layout_gutters;\n      obj.paddingLeft = `${gutters/2}px`;\n      obj.paddingRight = `${gutters/2}px`;\n      obj.paddingBottom = `${gutters}px`;\n      \n      if(idx%2===0) obj.paddingLeft = 0;\n      else if(idx%2===1) obj.paddingRight = 0;\n      \n      return obj;\n    }\n  },\n  computed: {\n    pageBg() {\n      return this.brandBgColor.main;\n    },\n    currentAddress() {\n      // 현재 주소\n      let add = this.address;\n      if (add && add.sido && add.sigungu) {\n        return `${add.sido} ${add.sigungu}`;\n      }\n      else return '';\n    },\n    containerStyle() {\n        return {\n          minHeight: 'calc(100vh - 50px)'\n        }\n      },\n    filtered() {\n        return this.$store.getters.filtered.length > 0;\n      },\n    inputStyle() {\n        return {\n          border: 'none',\n          width: '100%',\n          height: '48px',\n          backgroundColor: 'white',\n          padding: '12px 40px 12px 20px',\n          display: 'flex',\n          justifyContent: 'space-between',\n          borderRadius: '12px',\n          fontSize: '14px'\n        }\n      },\n    iconSearchStyle() {\n        return {\n          position: 'absolute',\n          top: '12px',\n          right: '16px'\n        }\n      },\n    btnStyles() {\n        return {\n          container: {\n            // backgroundColor: 'white',\n            // color: this.brandColor.primary.color,\n            color: '#fff',\n            fontWeight: 400\n          }\n        }\n      },\n    unsetCenter() {\n        return {\n          position: 'static',\n          transform: 'none',\n          left: 0\n        }\n      },\n    selectedTabStyle() {\n        return {\n          padding: '12px 16px 11px',\n          textAlign: 'center',\n          fontSize: '14px',\n          borderTop: this.brandBorder.main.border,\n          borderBottom: `2px solid ${this.brandColor.primary.color}`,\n          backgroundColor: '#fff',\n          color: this.brandColor.primary.color\n        }\n      },\n    unselectedTabStyle() {\n        return {\n          padding: '12px 16px',\n          textAlign: 'center',\n          fontSize: '14px',\n          color: this.brandColor.main.color,\n          backgroundColor: '#fff',\n          borderTop: this.brandBorder.main.border,\n        }\n      }\n  },\n  watch: {\n    '$route.query.gnb'(n) {\n      this.setCategoryName();\n      this.getData();\n    }\n  }\n}\n</script>\n<style scoped>\n.dropdown {\n    border-radius: 4px;\n    justify-content: space-between;\n    padding: 6px 10px;\n  }\n  \n  .dropdown-ul {\n    background-color: white;\n    top: 40px;\n    width: 96px;\n    box-shadow: 0 4px 24px 0 rgba(0,0,0,0.24);\n    border-radius: 4px;\n    right: 0;\n    padding: 10px 0;\n  }\n</style>\n\n"],"sourceRoot":"src/components/Pages"}]}