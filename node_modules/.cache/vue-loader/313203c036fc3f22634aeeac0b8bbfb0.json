{"remainingRequest":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/grit12/src/components/Pages/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mard/dev/grit12/src/components/Pages/Main.vue","mtime":1605260055000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport BottomMenu from \"@/components/LaunchPack_Common/BottomMenu/BottomMenu\"\nimport MyPage from \"@/components/Components/Pages/MyPage/MyPage\"\nimport PageHeaderMobile from \"@/components/Components/Common/PageHeaderMobile\"\nimport CategoryGnb from \"@/components/Components/Common/CategoryGnb\"\nimport FooterMobile from \"@/components/Components/Footer/FooterMobile\"\nimport PrivacyOverlay from \"@/components/Components/Pages/PrivacyOverlay/PrivacyOverlay\"\nimport TermsofserviceModal from \"@/components/Components/Pages/TermsofserviceModal/TermsofserviceModal\"\nimport PrivacyModal from \"@/components/Components/Pages/PrivacyModal/PrivacyModal\"\nimport MenuLoginDrawer from \"@/components/Components/Pages/Menu/MenuLoginDrawer\"\nimport PasswordEmail from \"@/components/Components/Pages/PasswordEmail/PasswordEmail\"\nimport MenuDrawer from \"@/components/Components/Pages/Menu/MenuDrawer\"\nimport StaffOverlay from \"@/components/Components/Pages/StaffOverlay/StaffOverlay\"\nimport PageMixin from \"@/components/Components/Mixin/PageMixin\"\n\nexport default {\n  name: 'Main',\n  components: {\n    BottomMenu,\n    MyPage,\n    PageHeaderMobile,\n    CategoryGnb,\n    FooterMobile,\n    PrivacyOverlay,\n    TermsofserviceModal,\n    PrivacyModal,\n    MenuLoginDrawer,\n    PasswordEmail,\n    MenuDrawer,\n    StaffOverlay\n  },\n  mixins: [\n    PageMixin\n  ],\n  props: {\n    isNew: {\n      type: Boolean,\n      default: false,\n    },\n\n  },\n  data() {\n    return {\n      \"menu\": [],\n      \"address\": {},\n      \"footerTo\": undefined,\n      \"mainPages\": [\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth\": [\n              1\n            ],\n            \"depth1\": \"Gnbs\",\n            \"visible\": true\n          },\n          \"name\": \"product\",\n          \"header\": true\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"region\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"signin\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"signup\",\n          \"header\": true\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"password\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"splash\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"termsofservice\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"privacy\",\n          \"header\": false\n        }\n      ],\n      \"mainHeader\": {\n        \"default\": {\n          \"gnb\": true,\n          \"header\": true\n        }\n      },\n      \"pageFooter\": [\n        \"media_detail\",\n        \"media\",\n        \"training_detail\",\n        \"program\",\n        \"call_list\",\n        \"product\",\n        \"contact\",\n        \"contact_detail\",\n        \"event\",\n        \"product_detail\",\n        \"search\",\n        \"home\",\n        \"notice\",\n        \"partner_detail\",\n        \"event_detail\",\n        \"inquiry_reg\",\n        \"like\",\n        \"notice_detail\",\n        \"contact_reg\",\n        \"signup\",\n        \"staff\",\n        \"competition_detail\",\n        \"competition_register\",\n        \"competition\",\n        \"training\",\n        \"info\"\n      ],\n      \"page_modal\": undefined,\n      \"footerDelay\": false,\n      \"page_overlay\": undefined,\n      \"page_actionsheet\": undefined,\n      \"page_drawer_left\": undefined,\n      \"page_modal_props\": undefined,\n      \"page_drawer_right\": undefined,\n      \"page_overlay_props\": undefined,\n      \"page_actionsheet_props\": undefined,\n      \"page_drawer_left_props\": undefined,\n      \"page_drawer_right_props\": undefined,\n      \"boards\": [\n        {\n          \"name\": \"Menu\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"MenuDrawer\",\n              \"folder__name\": \"Menu\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            },\n            {\n              \"template_name\": \"\",\n              \"name\": \"MenuLoginDrawer\",\n              \"folder__name\": \"Menu\",\n              \"login_required\": true,\n              \"grade\": 1,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PasswordEmail\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PasswordEmail\",\n              \"folder__name\": \"PasswordEmail\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PrivacyModal\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PrivacyModal\",\n              \"folder__name\": \"PrivacyModal\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PrivacyOverlay\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PrivacyOverlay\",\n              \"folder__name\": \"PrivacyOverlay\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"StaffOverlay\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"StaffOverlay\",\n              \"folder__name\": \"StaffOverlay\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"TermsofserviceModal\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"TermsofserviceModal\",\n              \"folder__name\": \"TermsofserviceModal\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        }\n      ]\n    }\n  },\n  created() {\n    this.$axios.get('public/ui/brand/admin').then(res => {\n        this.menu = res.data.menu;\n    });\n    \n    this.$store.commit('setAlivePage', ['Home','Search','Like','Notice','Event']);\n\n    this.$store.commit('setCommonStyle', {\n      borderRadius: '6px',\n      blockMarginBottom: '8px',\n      blockMarginBottomPc: '8px',\n      dummyImage: {\n        bg: 'https://s3.ap-northeast-2.amazonaws.com/launchpack-dessertplace/media/img_dummy.png',\n        person: 'https://s3.ap-northeast-2.amazonaws.com/launchpack-storage/media/img/default/img_person.png'\n      },\n      filter: {\n        radio: 'full',   // default, full\n        checkbox: 'full'   // default, full\n      }\n    });      \n\n    // 필터 ID 세팅\n    this.$store.commit('setCommonFilter', {\n      productFilter: 1\n    })\n    \n    this.setPageTypeOn();\n    \n    this.footerDelay=false;\n    setTimeout(()=>{\n      this.footerDelay=true;\n    },500);\n  },\n  \n  methods: {\n    onCloseModal() {\n      let body = document.getElementsByTagName('body')[0];\n      body.removeAttribute('style')\n    },\n    closeModal() {\n      this.page_modal = undefined;\n      this.$refs.pageModal.close();\n    },\n    getPageName(prop) {\n      let boards = this.boards.filter(item => { return item.name === prop })[0].components;\n\n      if(this.isLogin) {\n        let name = '';\n        if(this.user.grade) {\n          for(let i=this.user.grade.order; i>=1; i--) {\n            name = this.getBoardsUserGrade(boards, i);\n            if(name!=='') {\n              break;\n            }\n          }\n        }\n        else {\n          name = this.getBoardsUserLogin(boards);\n        }\n\n        if(name === '') {\n          name = this.getBoardsGuest(boards);\n        }\n        return name;\n      }\n      else {\n        return this.getBoardsGuest(boards);\n      }\n    },\n    getName(board) {\n      if(board.template_name !== '') {\n        return this.dashToPascal(`${board.template_name}${board.name}`);\n      } else {\n        return board.name;\n      }\n    },\n    dashToPascal(value) {\n      let camel = value.replace(/([-_][a-z])/ig, ($1) => {\n        return $1.toUpperCase()\n          .replace('-', '')\n          .replace('_', '');\n      });\n      return camel[0].toUpperCase() + camel.substring(1);\n    },\n    getBoardsGuest(boards) {\n      let board = boards.filter(item=>{ return item.login_required === false });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    getBoardsUserLogin(boards) {\n      let board = boards.filter(item=>{ return item.login_required === true && (item.grade === 1 || !item.grade) });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    getBoardsUserGrade(boards, grade) {\n      let board = boards.filter(item=>{ return item.login_required === true && item.grade === grade });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    setPageTypeOn() {\n      this.$root.$on('page_overlay', (res, props) => {\n        this.page_overlay = this.getPageName(res);\n        this.page_overlay_props = props;\n        this.$refs.overlayModal.open();\n      });\n      this.$root.$on('page_modal', (res, props) => {\n        this.page_modal = this.getPageName(res);\n        this.page_modal_props = props;\n        this.$refs.pageModal.open();\n      });\n      this.$root.$on('page_drawer_left', (res, props) => {\n        this.page_drawer_left = this.getPageName(res);\n        this.page_drawer_left_props = props;\n        setTimeout(() => {\n          this.$refs.pageDrawerLeft.open();\n        }, 200);\n      });\n      this.$root.$on('page_drawer_right', (res, props) => {\n        this.page_drawer_right = this.getPageName(res);\n        this.page_drawer_right_props = props;\n        setTimeout(() => {\n          this.$refs.pageDrawerRight.open();\n        }, 200);\n      });\n      this.$root.$on('page_actionsheet', (res, props) => {\n        this.page_actionsheet = this.getPageName(res);\n        this.page_actionsheet_props = props;\n        setTimeout(() => {\n          this.$refs.pageActionsheet.open();\n        }, 200);\n      });\n    }\n  },\n  computed: {\n    visibleHeader() {\n      let obj = find(this.mainPages, 'name', this.$route.path.replace('/',''));\n      if(!obj) return this.mainHeader.default.header;\n      else return obj.header;\n    },\n    visibleGnb() {\n      let obj = find(this.mainPages, 'name', this.$route.path.replace('/',''));\n      if(!obj) return this.mainHeader.default.gnb;\n      else return obj.gnb;\n    },\n    gnbStyle() {\n      return {\n        borderTop: this.brandBorder.main.border,\n        borderBottom: this.brandBorder.main.border\n      }\n    },\n    visibleFooter() {\n      // 현재 path\n      let path = this.$route.path;\n      if(this.previewPath) {\n        path = this.previewPath;\n      }\n      path = path.replace('/','');\n      \n      return this.pageFooter.filter(item=>{ return path === item  }).length > 0;\n    },\n    drawerStyles() {\n      return {\n        width: `${this.$store.getters.deviceWidth}px`,\n        height: '100vh',\n        background: 'white',\n        overflowY: 'auto'\n      }\n    },\n    actionsheetStyles() {\n      return {\n        width: `${this.$store.getters.deviceWidth}px`,\n        height: '150px',\n        background: 'white',\n        overflowY: 'auto'\n      }\n    },\n    routerViewStyle() {\n      let deco = {\n        minHeight: 'calc(100vh - 50px)',\n        paddingBottom: '50px'\n      };\n      if(this.visibleMenu)\n        deco.paddingBottom = '72px'\n      return deco;  \n    },\n    visibleMenu() {\n        if(this.$store.getters.brand.menu_type === 1) return false;\n        if(this.$route.path.indexOf('signin')>-1) return true;\n        else {\n          let visible = false;\n          this.menu.forEach(item => {\n\n            if(this.$route.path.indexOf(item.link)>-1) {\n              visible = true;\n            }\n            else if (this.$route.path.indexOf('search')>-1)  {\n              visible = true;\n            }\n          });\n\n          return visible;\n        }\n      },\n    footerStyle() {\n      let deco = {};\n      if(this.visibleMenu) {\n        deco.paddingBottom = '50px';\n      }\n      return deco;\n    }\n  },\n  watch: {\n    $route(n, o) {\n      if(n.path === '/signin') {\n        if(o && o.path) {\n          this.$store.commit('setPreviousPath', o.fullPath);\n        }\n      }\n      \n      if(this.$refs.drawer && this.$refs.drawer.active) {\n        this.$refs.drawer.close();\n      }\n      if(this.footerTo) {\n        clearTimeout(this.footerTo);\n      }\n      this.footerDelay=false;\n      this.footerTo = setTimeout(()=>{\n        this.footerDelay=true;\n      },500);\n    }\n  }\n}\n",{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/components/Pages","sourcesContent":["<template>\n<div class=\"app-main\">\n    <div>\n      <div>\n        <page-header-mobile \n          v-if=\"visibleHeader\"></page-header-mobile>\n        <!--<category-gnb :style=\"gnbStyle\"-->\n        <!--  :mainPages=\"mainPages\"-->\n        <!--  v-if=\"visibleGnb\"></category-gnb>-->\n      </div>\n      <!-- 페이지 타입 : 페이지 -->\n      <keep-alive :include=\"$store.getters.alivePage\">\n        <router-view :style=\"routerViewStyle\" style=\"margin-top:50px\"></router-view>\n      </keep-alive>\n      <footer-mobile v-if=\"visibleFooter && footerDelay\" :style=\"footerStyle\"></footer-mobile>\n      <!-- 하단 메뉴 -->\n      <bottom-menu :menu=\"menu\" v-if=\"visibleMenu\"></bottom-menu>\n    </div>\n    \n    <!-- 포탈 -->\n    <!-- share 컴포넌트 포탈 -->\n    <portal-target name=\"share\"></portal-target>\n    <!-- BtnCall 컴포넌트 전화연결 포탈 -->\n    <portal-target name=\"btn-call-modal\"></portal-target>\n    \n    <!-- 아래 페이지 타입은 삭제할 경우 정상동작 하지 않음 -->\n    <!-- Launchpack Page Type -->\n    <!-- 페이지 타입 : 오버레이 -->\n    <div class=\"overlay-modal\">\n      <sweet-modal ref=\"overlayModal\" @close=\"onCloseModal\">\n        <component @closePage=\"$refs.overlayModal.close()\"\n          v-bind=\"page_overlay_props\"\n          v-if=\"page_overlay\" :is=\"page_overlay\"></component>\n      </sweet-modal>\n    </div>\n    <!-- 페이지 타입 : 모달 -->\n    <div class=\"page-modal\">\n      <sweet-modal ref=\"pageModal\" overlay-theme=\"dark\" @close=\"onCloseModal\">\n        <div style=\"overflow-y:auto;max-height:70vh;\">\n          <component @closePage=\"closeModal\"\n            v-bind=\"page_modal_props\"\n            v-if=\"page_modal\" :is=\"page_modal\"></component>\n        </div>\n      </sweet-modal>\n    </div>\n    <!-- 페이지 타입 : 드로워(왼쪽) -->\n    <drawer v-if=\"page_drawer_left\" direction=\"left\" :exist=\"true\" ref=\"pageDrawerLeft\">\n      <div :style=\"drawerStyles\">\n        <component @closePage=\"$refs.pageDrawerLeft.close()\"\n          v-bind=\"page_drawer_left_props\"\n          :is=\"page_drawer_left\"></component>\n      </div>\n    </drawer>\n    <!-- 페이지 타입 : 드로워(오른쪽) -->\n    <drawer v-if=\"page_drawer_right\" direction=\"right\" :exist=\"true\" ref=\"pageDrawerRight\">\n      <div :style=\"drawerStyles\">\n        <component @closePage=\"$refs.pageDrawerRight.close()\"\n          v-bind=\"page_drawer_right_props\"\n          :is=\"page_drawer_right\"></component>\n      </div>\n    </drawer>\n    <!-- 페이지 타입 : 액션시트 -->\n    <drawer v-if=\"page_actionsheet\" direction=\"bottom\" :exist=\"true\" ref=\"pageActionsheet\">\n      <div :style=\"actionsheetStyles\">\n        <component @closePage=\"$refs.pageActionsheet.close()\"\n          v-bind=\"page_actionsheet_props\"\n          :is=\"page_actionsheet\"></component>\n      </div>\n    </drawer>\n    <!-- Launchpack Page Type -->\n  </div>\n</template>\n<script>\nimport BottomMenu from \"@/components/LaunchPack_Common/BottomMenu/BottomMenu\"\nimport MyPage from \"@/components/Components/Pages/MyPage/MyPage\"\nimport PageHeaderMobile from \"@/components/Components/Common/PageHeaderMobile\"\nimport CategoryGnb from \"@/components/Components/Common/CategoryGnb\"\nimport FooterMobile from \"@/components/Components/Footer/FooterMobile\"\nimport PrivacyOverlay from \"@/components/Components/Pages/PrivacyOverlay/PrivacyOverlay\"\nimport TermsofserviceModal from \"@/components/Components/Pages/TermsofserviceModal/TermsofserviceModal\"\nimport PrivacyModal from \"@/components/Components/Pages/PrivacyModal/PrivacyModal\"\nimport MenuLoginDrawer from \"@/components/Components/Pages/Menu/MenuLoginDrawer\"\nimport PasswordEmail from \"@/components/Components/Pages/PasswordEmail/PasswordEmail\"\nimport MenuDrawer from \"@/components/Components/Pages/Menu/MenuDrawer\"\nimport StaffOverlay from \"@/components/Components/Pages/StaffOverlay/StaffOverlay\"\nimport PageMixin from \"@/components/Components/Mixin/PageMixin\"\n\nexport default {\n  name: 'Main',\n  components: {\n    BottomMenu,\n    MyPage,\n    PageHeaderMobile,\n    CategoryGnb,\n    FooterMobile,\n    PrivacyOverlay,\n    TermsofserviceModal,\n    PrivacyModal,\n    MenuLoginDrawer,\n    PasswordEmail,\n    MenuDrawer,\n    StaffOverlay\n  },\n  mixins: [\n    PageMixin\n  ],\n  props: {\n    isNew: {\n      type: Boolean,\n      default: false,\n    },\n\n  },\n  data() {\n    return {\n      \"menu\": [],\n      \"address\": {},\n      \"footerTo\": undefined,\n      \"mainPages\": [\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth\": [\n              1\n            ],\n            \"depth1\": \"Gnbs\",\n            \"visible\": true\n          },\n          \"name\": \"product\",\n          \"header\": true\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"region\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"signin\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"signup\",\n          \"header\": true\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"password\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"splash\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"termsofservice\",\n          \"header\": false\n        },\n        {\n          \"gnb\": {\n            \"all\": [],\n            \"board\": [],\n            \"depth1\": \"Gnbs\",\n            \"visible\": false\n          },\n          \"name\": \"privacy\",\n          \"header\": false\n        }\n      ],\n      \"mainHeader\": {\n        \"default\": {\n          \"gnb\": true,\n          \"header\": true\n        }\n      },\n      \"pageFooter\": [\n        \"media_detail\",\n        \"media\",\n        \"training_detail\",\n        \"program\",\n        \"call_list\",\n        \"product\",\n        \"contact\",\n        \"contact_detail\",\n        \"event\",\n        \"product_detail\",\n        \"search\",\n        \"home\",\n        \"notice\",\n        \"partner_detail\",\n        \"event_detail\",\n        \"inquiry_reg\",\n        \"like\",\n        \"notice_detail\",\n        \"contact_reg\",\n        \"signup\",\n        \"staff\",\n        \"competition_detail\",\n        \"competition_register\",\n        \"competition\",\n        \"training\",\n        \"info\"\n      ],\n      \"page_modal\": undefined,\n      \"footerDelay\": false,\n      \"page_overlay\": undefined,\n      \"page_actionsheet\": undefined,\n      \"page_drawer_left\": undefined,\n      \"page_modal_props\": undefined,\n      \"page_drawer_right\": undefined,\n      \"page_overlay_props\": undefined,\n      \"page_actionsheet_props\": undefined,\n      \"page_drawer_left_props\": undefined,\n      \"page_drawer_right_props\": undefined,\n      \"boards\": [\n        {\n          \"name\": \"Menu\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"MenuDrawer\",\n              \"folder__name\": \"Menu\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            },\n            {\n              \"template_name\": \"\",\n              \"name\": \"MenuLoginDrawer\",\n              \"folder__name\": \"Menu\",\n              \"login_required\": true,\n              \"grade\": 1,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PasswordEmail\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PasswordEmail\",\n              \"folder__name\": \"PasswordEmail\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PrivacyModal\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PrivacyModal\",\n              \"folder__name\": \"PrivacyModal\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"PrivacyOverlay\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"PrivacyOverlay\",\n              \"folder__name\": \"PrivacyOverlay\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"StaffOverlay\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"StaffOverlay\",\n              \"folder__name\": \"StaffOverlay\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        },\n        {\n          \"name\": \"TermsofserviceModal\",\n          \"components\": [\n            {\n              \"template_name\": \"\",\n              \"name\": \"TermsofserviceModal\",\n              \"folder__name\": \"TermsofserviceModal\",\n              \"login_required\": false,\n              \"grade\": null,\n              \"partner_grade\": null\n            }\n          ]\n        }\n      ]\n    }\n  },\n  created() {\n    this.$axios.get('public/ui/brand/admin').then(res => {\n        this.menu = res.data.menu;\n    });\n    \n    this.$store.commit('setAlivePage', ['Home','Search','Like','Notice','Event']);\n\n    this.$store.commit('setCommonStyle', {\n      borderRadius: '6px',\n      blockMarginBottom: '8px',\n      blockMarginBottomPc: '8px',\n      dummyImage: {\n        bg: 'https://s3.ap-northeast-2.amazonaws.com/launchpack-dessertplace/media/img_dummy.png',\n        person: 'https://s3.ap-northeast-2.amazonaws.com/launchpack-storage/media/img/default/img_person.png'\n      },\n      filter: {\n        radio: 'full',   // default, full\n        checkbox: 'full'   // default, full\n      }\n    });      \n\n    // 필터 ID 세팅\n    this.$store.commit('setCommonFilter', {\n      productFilter: 1\n    })\n    \n    this.setPageTypeOn();\n    \n    this.footerDelay=false;\n    setTimeout(()=>{\n      this.footerDelay=true;\n    },500);\n  },\n  \n  methods: {\n    onCloseModal() {\n      let body = document.getElementsByTagName('body')[0];\n      body.removeAttribute('style')\n    },\n    closeModal() {\n      this.page_modal = undefined;\n      this.$refs.pageModal.close();\n    },\n    getPageName(prop) {\n      let boards = this.boards.filter(item => { return item.name === prop })[0].components;\n\n      if(this.isLogin) {\n        let name = '';\n        if(this.user.grade) {\n          for(let i=this.user.grade.order; i>=1; i--) {\n            name = this.getBoardsUserGrade(boards, i);\n            if(name!=='') {\n              break;\n            }\n          }\n        }\n        else {\n          name = this.getBoardsUserLogin(boards);\n        }\n\n        if(name === '') {\n          name = this.getBoardsGuest(boards);\n        }\n        return name;\n      }\n      else {\n        return this.getBoardsGuest(boards);\n      }\n    },\n    getName(board) {\n      if(board.template_name !== '') {\n        return this.dashToPascal(`${board.template_name}${board.name}`);\n      } else {\n        return board.name;\n      }\n    },\n    dashToPascal(value) {\n      let camel = value.replace(/([-_][a-z])/ig, ($1) => {\n        return $1.toUpperCase()\n          .replace('-', '')\n          .replace('_', '');\n      });\n      return camel[0].toUpperCase() + camel.substring(1);\n    },\n    getBoardsGuest(boards) {\n      let board = boards.filter(item=>{ return item.login_required === false });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    getBoardsUserLogin(boards) {\n      let board = boards.filter(item=>{ return item.login_required === true && (item.grade === 1 || !item.grade) });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    getBoardsUserGrade(boards, grade) {\n      let board = boards.filter(item=>{ return item.login_required === true && item.grade === grade });\n      return board.length === 0 ? '' : this.getName(board[0]);\n    },\n    setPageTypeOn() {\n      this.$root.$on('page_overlay', (res, props) => {\n        this.page_overlay = this.getPageName(res);\n        this.page_overlay_props = props;\n        this.$refs.overlayModal.open();\n      });\n      this.$root.$on('page_modal', (res, props) => {\n        this.page_modal = this.getPageName(res);\n        this.page_modal_props = props;\n        this.$refs.pageModal.open();\n      });\n      this.$root.$on('page_drawer_left', (res, props) => {\n        this.page_drawer_left = this.getPageName(res);\n        this.page_drawer_left_props = props;\n        setTimeout(() => {\n          this.$refs.pageDrawerLeft.open();\n        }, 200);\n      });\n      this.$root.$on('page_drawer_right', (res, props) => {\n        this.page_drawer_right = this.getPageName(res);\n        this.page_drawer_right_props = props;\n        setTimeout(() => {\n          this.$refs.pageDrawerRight.open();\n        }, 200);\n      });\n      this.$root.$on('page_actionsheet', (res, props) => {\n        this.page_actionsheet = this.getPageName(res);\n        this.page_actionsheet_props = props;\n        setTimeout(() => {\n          this.$refs.pageActionsheet.open();\n        }, 200);\n      });\n    }\n  },\n  computed: {\n    visibleHeader() {\n      let obj = find(this.mainPages, 'name', this.$route.path.replace('/',''));\n      if(!obj) return this.mainHeader.default.header;\n      else return obj.header;\n    },\n    visibleGnb() {\n      let obj = find(this.mainPages, 'name', this.$route.path.replace('/',''));\n      if(!obj) return this.mainHeader.default.gnb;\n      else return obj.gnb;\n    },\n    gnbStyle() {\n      return {\n        borderTop: this.brandBorder.main.border,\n        borderBottom: this.brandBorder.main.border\n      }\n    },\n    visibleFooter() {\n      // 현재 path\n      let path = this.$route.path;\n      if(this.previewPath) {\n        path = this.previewPath;\n      }\n      path = path.replace('/','');\n      \n      return this.pageFooter.filter(item=>{ return path === item  }).length > 0;\n    },\n    drawerStyles() {\n      return {\n        width: `${this.$store.getters.deviceWidth}px`,\n        height: '100vh',\n        background: 'white',\n        overflowY: 'auto'\n      }\n    },\n    actionsheetStyles() {\n      return {\n        width: `${this.$store.getters.deviceWidth}px`,\n        height: '150px',\n        background: 'white',\n        overflowY: 'auto'\n      }\n    },\n    routerViewStyle() {\n      let deco = {\n        minHeight: 'calc(100vh - 50px)',\n        paddingBottom: '50px'\n      };\n      if(this.visibleMenu)\n        deco.paddingBottom = '72px'\n      return deco;  \n    },\n    visibleMenu() {\n        if(this.$store.getters.brand.menu_type === 1) return false;\n        if(this.$route.path.indexOf('signin')>-1) return true;\n        else {\n          let visible = false;\n          this.menu.forEach(item => {\n\n            if(this.$route.path.indexOf(item.link)>-1) {\n              visible = true;\n            }\n            else if (this.$route.path.indexOf('search')>-1)  {\n              visible = true;\n            }\n          });\n\n          return visible;\n        }\n      },\n    footerStyle() {\n      let deco = {};\n      if(this.visibleMenu) {\n        deco.paddingBottom = '50px';\n      }\n      return deco;\n    }\n  },\n  watch: {\n    $route(n, o) {\n      if(n.path === '/signin') {\n        if(o && o.path) {\n          this.$store.commit('setPreviousPath', o.fullPath);\n        }\n      }\n      \n      if(this.$refs.drawer && this.$refs.drawer.active) {\n        this.$refs.drawer.close();\n      }\n      if(this.footerTo) {\n        clearTimeout(this.footerTo);\n      }\n      this.footerDelay=false;\n      this.footerTo = setTimeout(()=>{\n        this.footerDelay=true;\n      },500);\n    }\n  }\n}\n</script>\n\n<style>\n.app-main .sweet-modal {\n  overflow: hidden;\n}\n\n.app-main .sweet-modal .sweet-box-actions {\n  top: 4px;\n  right: 8px;\n  z-index: 1000;\n}\n.app-main .sweet-modal .sweet-box-actions .sweet-action-close {\n  color: #fff;\n  display: none;\n}\n.app-main .sweet-modal .sweet-box-actions .sweet-action-close:hover {\n  background: transparent !important;\n}\n.app-main .sweet-modal .sweet-content {\n/*padding 0 !important*/\n  text-align: left !important;\n}\n\n@media screen and (max-width: 600px) {\n  .app-main .sweet-modal.is-mobile-fullscreen {\n    height: unset;\n    position: relative;\n  }\n  .app-main .page-modal .sweet-modal.is-mobile-fullscreen {\n    height: unset;\n    position: relative;\n    width: 90%;\n  }\n  .app-main .overlay-modal .sweet-modal.is-mobile-fullscreen {\n    height: unset;\n    position: relative;\n    width: 100%;\n  }\n  .app-main .sweet-modal-overlay {\n    align-items: center;\n    justify-content: center;\n    display: flex;\n  }\n}\n\n.modal-mobile-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border: 0;\n  background: rgba(0,0,0,0.5);\n  width: 100vw;\n  height: 100vh;\n  z-index: 99999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.overlay-modal .sweet-modal {\n  overflow: hidden;\n  height: 100vh;\n  max-width: 414px;\n  overflow-y: hidden;\n}\n\n.overlay-modal .sweet-modal.is-alert .sweet-content {\n  padding: 0 !important;\n  height: 100vh;\n}\n\n.page-modal .sweet-modal {\n  color: #999;\n  display: block !important;\n}\n.page-modal .sweet-modal.is-alert .sweet-content {\n  padding: 0 !important;\n  max-height: 70vh;\n}\n\n/* transition */\n.fade-enter-active {\n  transition: opacity .5s ease-in-out;\n}\n.fade-enter {\n  opacity: 0;\n}\n</style>\n"]}]}