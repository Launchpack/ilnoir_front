{"remainingRequest":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/grit12/src/components/Components/Block/BlockRegion.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mard/dev/grit12/src/components/Components/Block/BlockRegion.vue","mtime":1605260008000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mard/dev/grit12/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/grit12/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport BlockMapSearch from \"@/components/Components/Block/BlockMapSearch\"\nimport CardMixin from \"@/components/Mixins/CardMixin\"\n\nexport default {\n  name: 'BlockRegion',\n  components: {\n    BlockMapSearch\n  },\n  mixins: [\n    CardMixin\n  ],\n  props: {\n    scrollHeight: {\n      type: Number,\n      default: 296,\n      required: false,\n    },\n\n  },\n  data() {\n    return {\n      \"dong\": [],\n      \"sido\": [],\n      \"type\": \"service\",\n      \"showMap\": false,\n      \"sigungu\": [],\n      \"hoverSido\": {},\n      \"hoverSigungu\": {},\n      \"selectedSido\": {},\n      \"selectedSigungu\": {}\n    }\n  },\n  created() {\n    // 시/도 데이터 가져오기\n    this.$axios.get(`public/address/${this.type}/sido`)\n      .then(res => {\n        if ( res.status === 200 ) {\n          this.sido = res.data;\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  },\n  \n  methods: {\n    clickCurrent() {\n      this.$emit('setCurrent');\n      this.selectedSido = {};\n      this.selectedSigungu = {};\n    },\n    // 마우스 오버, 클릭 style 때문에 methods로 처리\n      itemStyle(item, type) {\n        let deco = {\n          color: this.brandColor.main.color,\n          background: this.brandBgColor.sub.backgroundColor,\n          marginBottom: this.layout_gutter+'px'\n        };\n\n        // 시도 아이템: 마우스오버 or 클릭 시 배경색상\n        if ( type === 'sido' && item !== undefined ) {\n          if ( item.id === this.hoverSido.id || item.id === this.selectedSido.id ) {\n            deco.background = this.brandBgColor.primary.backgroundColor;\n            deco.color = '#fff';\n          }\n        }\n\n        // 시군구 아이템: 마우스오버 or 클릭 시 배경색상\n        if ( type === 'sigungu' && item !== undefined ) {\n          if ( item.id === this.hoverSigungu.id || item.id === this.selectedSigungu.id ) {\n            deco.background = this.brandBgColor.primary.backgroundColor;\n            deco.color = '#fff';\n          }\n        }\n\n        return deco;\n      },\n    clickSido(item) {\n        // 시군구 데이터 가져오기\n        this.$axios.get(`public/address/${this.type}/sido/${item.id}/sigungu`)\n          .then(res => {\n            if ( res.status === 200 ) {\n              this.sigungu = res.data;\n              this.selectedSido = item;\n              this.selectedSigungu = {};\n            }\n          })\n          .catch(err => {\n            console.log(err);\n          })\n      },\n    clickSigungu(item) {\n        this.selectedSigungu = item;\n        // this.$emit('selectedRegion', {\n        //   sido: this.selectedSido,\n        //   sigungu: this.selectedSigungu\n        // });\n        this.selectRegion();\n      },\n    selectRegion() {\n        let address = `${this.selectedSido.name} ${this.selectedSigungu.name}`;\n        \n        if (this.selectedSido.name==='세종특별자치시') address = this.selectedSido.name;\n        \n        this.$axios.get(`/public/service/local?search_text=${address}`)\n        .then(res => {\n          if (res.status===200) {\n            let location = res.data.local_list[0];\n            this.$store.commit('setCurrentPosition', {\n              lng: location.x,\n              lat: location.y\n            })\n            this.$emit('changePosition', {\n              lng: location.x,\n              lat: location.y\n            })\n          }\n        })        \n      },\n    selectMap(val) {\n        this.$store.commit('setCurrentPosition', {\n          lng: val.x,\n          lat: val.y\n        })\n        this.$emit('changePosition', {\n          lng: val.x,\n          lat: val.y\n        })\n        this.showMap = false;\n        this.selectedSido = {};\n        this.selectedSigungu = {};\n      },\n    overSido(item) {\n        this.hoverSido = item;\n      },\n    leaveSido() {\n        this.hoverSido = {};\n      },\n    overSigungu(item) {\n        this.hoverSigungu = item;\n      },\n    leaveSigungu() {\n        this.hoverSigungu = {};\n      }\n  },\n  computed: {\n    colLeft() {\n      return {\n        marginRight: `${this.layout_gutter/2}px`\n      }\n    },\n    colRight() {\n      return {\n        marginLeft: `${this.layout_gutter/2}px`\n      }\n    },\n    scrollStyle() {\n      let scrollbar = this.getScrollbarWidth();\n      return {\n        width: `calc(100% + ${scrollbar}px)`,\n        height: `calc(100vh - ${this.scrollHeight}px)`,\n        overflowY: 'scroll',\n        overflowX: 'hidden'\n      }\n    }\n  },\n  watch: {\n    \n  }\n}\n",{"version":3,"sources":["BlockRegion.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"BlockRegion.vue","sourceRoot":"src/components/Components/Block","sourcesContent":["<template>\n<div :style=\"pagePadding\" style=\"padding-top:24px; padding-bottom:24px;\">\n  \n  <!--주소 선택-->\n  <div class=\"wrap\" style=\"margin-bottom:32px;\">\n    <div class=\"title size-20 weight-500 margin-bottom-12\" :style=\"brandColor.main\">위치 지정</div>\n    <div class=\"flex-align\">\n      <div class=\"col-6 button size-14 flex-between unselect\" style=\"padding:16px;height: 48px;\" \n        :style=\"[brandBgColor.white, brandColor.main, radius, colLeft]\"\n        @click=\"clickCurrent\">\n        내 위치로 지정\n        <i class=\"material-icons size-20\" :style=\"brandColor.help\">gps_fixed</i>\n      </div>\n      <div class=\"col-6 button size-14 flex-between unselect\" style=\"padding:16px;height: 48px;\" \n        :style=\"[brandBgColor.white, brandColor.main, radius, colRight]\"\n        @click=\"showMap=true\">\n        지도로 위치 지정\n        <i class=\"material-icons size-20\" :style=\"brandColor.main\">map</i>\n      </div>\n    </div>\n  </div>\n  <div class=\"wrap size-14 full-width overflow-hidden\">\n    <div class=\"title size-20 weight-500 margin-bottom-12\" :style=\"brandColor.main\">주소로 위치 지정</div>\n    <!-- '시도 선택' / '시군구 선택' -->\n    <div class=\"flex-align\" style=\"margin-bottom:16px;\">\n      <div class=\"col-6\" :style=\"[brandColor.main, colLeft]\">시/도 선택</div>\n      <div class=\"col-6\" :style=\"[brandColor.main, colRight]\">시/군/구 선택</div>\n    </div>\n    <!-- 시도/시군구 데이터 -->\n    <div class=\"flex weight-500\" :style=\"scrollStyle\">\n      <!-- 시도 (좌측) -->\n        <div class=\"col-6\" :style=\"colLeft\">\n          <div v-for=\"(item, idx) in sido\"\n               :key=\"`sido${idx}`\"\n               class=\"sido-item flex-align unselect\"\n               :style=\"[radius,itemStyle(item, 'sido')]\"\n               @click.stop.prevent=\"clickSido(item)\"\n               @mouseover.stop.prevent=\"overSido(item)\"\n               @mouseleave.stop.prevent=\"leaveSido\">\n            {{ item.name }}\n          </div>\n        </div>\n      <!-- 시군구 (우측) -->\n        <div class=\"col-6\" :style=\"colRight\">\n          <div v-for=\"(item, idx) in sigungu\"\n               :key=\"`sigungu${idx}`\"\n               class=\"sigungu-item flex-align unselect\"\n               :style=\"[radius,itemStyle(item, 'sigungu')]\"\n               @click.stop.prevent=\"clickSigungu(item)\"\n               @mouseover.stop.prevent=\"overSigungu(item)\"\n               @mouseleave.stop.prevent=\"leaveSigungu\">\n            {{ item.name }}\n          </div>\n        </div>\n    </div>\n  </div>\n  \n  <!--맵뷰-->\n  <block-map-search v-if=\"showMap\" @closeMap=\"showMap=false\" @setMapLocation=\"val => selectMap(val)\"></block-map-search>\n</div>\n</template>\n<script>\nimport BlockMapSearch from \"@/components/Components/Block/BlockMapSearch\"\nimport CardMixin from \"@/components/Mixins/CardMixin\"\n\nexport default {\n  name: 'BlockRegion',\n  components: {\n    BlockMapSearch\n  },\n  mixins: [\n    CardMixin\n  ],\n  props: {\n    scrollHeight: {\n      type: Number,\n      default: 296,\n      required: false,\n    },\n\n  },\n  data() {\n    return {\n      \"dong\": [],\n      \"sido\": [],\n      \"type\": \"service\",\n      \"showMap\": false,\n      \"sigungu\": [],\n      \"hoverSido\": {},\n      \"hoverSigungu\": {},\n      \"selectedSido\": {},\n      \"selectedSigungu\": {}\n    }\n  },\n  created() {\n    // 시/도 데이터 가져오기\n    this.$axios.get(`public/address/${this.type}/sido`)\n      .then(res => {\n        if ( res.status === 200 ) {\n          this.sido = res.data;\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  },\n  \n  methods: {\n    clickCurrent() {\n      this.$emit('setCurrent');\n      this.selectedSido = {};\n      this.selectedSigungu = {};\n    },\n    // 마우스 오버, 클릭 style 때문에 methods로 처리\n      itemStyle(item, type) {\n        let deco = {\n          color: this.brandColor.main.color,\n          background: this.brandBgColor.sub.backgroundColor,\n          marginBottom: this.layout_gutter+'px'\n        };\n\n        // 시도 아이템: 마우스오버 or 클릭 시 배경색상\n        if ( type === 'sido' && item !== undefined ) {\n          if ( item.id === this.hoverSido.id || item.id === this.selectedSido.id ) {\n            deco.background = this.brandBgColor.primary.backgroundColor;\n            deco.color = '#fff';\n          }\n        }\n\n        // 시군구 아이템: 마우스오버 or 클릭 시 배경색상\n        if ( type === 'sigungu' && item !== undefined ) {\n          if ( item.id === this.hoverSigungu.id || item.id === this.selectedSigungu.id ) {\n            deco.background = this.brandBgColor.primary.backgroundColor;\n            deco.color = '#fff';\n          }\n        }\n\n        return deco;\n      },\n    clickSido(item) {\n        // 시군구 데이터 가져오기\n        this.$axios.get(`public/address/${this.type}/sido/${item.id}/sigungu`)\n          .then(res => {\n            if ( res.status === 200 ) {\n              this.sigungu = res.data;\n              this.selectedSido = item;\n              this.selectedSigungu = {};\n            }\n          })\n          .catch(err => {\n            console.log(err);\n          })\n      },\n    clickSigungu(item) {\n        this.selectedSigungu = item;\n        // this.$emit('selectedRegion', {\n        //   sido: this.selectedSido,\n        //   sigungu: this.selectedSigungu\n        // });\n        this.selectRegion();\n      },\n    selectRegion() {\n        let address = `${this.selectedSido.name} ${this.selectedSigungu.name}`;\n        \n        if (this.selectedSido.name==='세종특별자치시') address = this.selectedSido.name;\n        \n        this.$axios.get(`/public/service/local?search_text=${address}`)\n        .then(res => {\n          if (res.status===200) {\n            let location = res.data.local_list[0];\n            this.$store.commit('setCurrentPosition', {\n              lng: location.x,\n              lat: location.y\n            })\n            this.$emit('changePosition', {\n              lng: location.x,\n              lat: location.y\n            })\n          }\n        })        \n      },\n    selectMap(val) {\n        this.$store.commit('setCurrentPosition', {\n          lng: val.x,\n          lat: val.y\n        })\n        this.$emit('changePosition', {\n          lng: val.x,\n          lat: val.y\n        })\n        this.showMap = false;\n        this.selectedSido = {};\n        this.selectedSigungu = {};\n      },\n    overSido(item) {\n        this.hoverSido = item;\n      },\n    leaveSido() {\n        this.hoverSido = {};\n      },\n    overSigungu(item) {\n        this.hoverSigungu = item;\n      },\n    leaveSigungu() {\n        this.hoverSigungu = {};\n      }\n  },\n  computed: {\n    colLeft() {\n      return {\n        marginRight: `${this.layout_gutter/2}px`\n      }\n    },\n    colRight() {\n      return {\n        marginLeft: `${this.layout_gutter/2}px`\n      }\n    },\n    scrollStyle() {\n      let scrollbar = this.getScrollbarWidth();\n      return {\n        width: `calc(100% + ${scrollbar}px)`,\n        height: `calc(100vh - ${this.scrollHeight}px)`,\n        overflowY: 'scroll',\n        overflowX: 'hidden'\n      }\n    }\n  },\n  watch: {\n    \n  }\n}\n</script>\n<style scoped>\n.sido-item, .sigungu-item {\n    padding: 0 16px;\n    height: 48px;\n  }\n</style>\n\n"]}]}