{"remainingRequest":"/Users/mard/dev/ilnoir/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mard/dev/ilnoir/src/components/Components/Common/Banner.vue?vue&type=style&index=0&id=6a04cd72&scoped=true&lang=css&","dependencies":[{"path":"/Users/mard/dev/ilnoir/src/components/Components/Common/Banner.vue","mtime":1605259982000},{"path":"/Users/mard/dev/ilnoir/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mard/dev/ilnoir/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mard/dev/ilnoir/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/mard/dev/ilnoir/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mard/dev/ilnoir/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.video-wrapper {\n  position: relative;\n  height: 0;\n  margin-bottom: 2px;\n}\n.video-wrapper iframe {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: 0;\n  pointer-events: none;\n}\n",{"version":3,"sources":["Banner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAscA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Banner.vue","sourceRoot":"src/components/Components/Common","sourcesContent":["<template>\r\n  <div v-if=\"isShowing && (urlVideo&&urlVideo.length>0) || (lpVideo&&lpVideo.length>0) || (banner&&banner.length>0)\"\r\n    class=\"full-width\" :style=\"[brandBgColor.main, containerStyle]\" name=\"Banner\">\r\n    <div class=\"video-wrapper\" v-if=\"urlVideo&&urlVideo.length>0\" :style=\"[wrapperStyle]\">\r\n      <iframe :src=\"computedVideo\" allow=\"autoplay;\" \r\n        :style=\"$store.getters.device === 'pc' ? pcIframeStyle : iframeStyle\"></iframe>\r\n    </div>\r\n\r\n    <div class=\"video-wrapper\" v-if=\"lpVideo&&lpVideo.length>0\" :style=\"[wrapperStyle]\"\r\n        style=\"background-color:white\">\r\n      <video :src=\"lpVideo[0].url\"\r\n        type=\"video/mp4\"\r\n        :height=\"$store.getters.device === 'pc' ? pcVideoHeight : bannerHeight\"\r\n        loop=\"true\"\r\n        muted=\"true\"\r\n        autoplay=\"true\"\r\n        playsinline\r\n        :style=\"$store.getters.device === 'pc' ? pcVideoStyle : {}\">\r\n      </video>\r\n    </div>\r\n\r\n    <image-slider :listData=\"banner\" :height=\"imgBannerHeight\" v-if=\"banner&&banner.length>0\"\r\n                  :style=\"[imageSliderStyle]\"\r\n                  :useRatio=\"useRatio\"\r\n                  :imageRates=\"imageRates\"\r\n                  :autoplay=\"autoplay\"\r\n                  :autoplaySpeed=\"autoplaySpeed\"\r\n                  :slidesToScroll=\"slidesToScroll\"\r\n                  :slidesToShow=\"slidesToShow\"></image-slider>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BlockMixin from \"@/components/Mixins/BlockMixin\";\r\n  import ImageSlider from \"@/components/Components/List/ImageSlider\";\r\n  export default {\r\n    name: \"Banner\",\r\n    mixins: [\r\n      BlockMixin\r\n    ],\r\n    props: {\r\n      // custom height\r\n      height: {\r\n        type: Number,\r\n        required: false\r\n      },\r\n      // custom width\r\n      width: {\r\n        type: Number,\r\n        required: false\r\n      },\r\n      // custom ratio (cf. height = width * ${ratio})\r\n      ratio: {\r\n        type: Number,\r\n        required: false\r\n      },\r\n      autoplay: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      autoplaySpeed: {\r\n        type: Number,\r\n        default: 3000,\r\n      },\r\n      slidesToScroll: {\r\n        type: Number,\r\n        default: 1,\r\n      },\r\n      slidesToShow: {\r\n        type: Number,\r\n        default: 1,\r\n      },\r\n      bannerId: {\r\n        type: Number,\r\n        default: 0\r\n      },\r\n      containerStyle: {\r\n        type: Object,\r\n        required: false\r\n      },\r\n      useRatio: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n    },\r\n    components: {ImageSlider},\r\n    data() {\r\n      return {\r\n        banner: [],\r\n        bannerRatio: 0,\r\n        imgBannerRatio: 0,\r\n        bannerHeight: 200,\r\n        imgBannerHeight: 200,\r\n        lpVideo: [],\r\n        urlVideo: [],\r\n        screenWidth: window.innerWidth,\r\n        isShowing: false,\r\n        imageWidth: 0,\r\n        imageRates: undefined\r\n      }\r\n    },\r\n    created() {\r\n      this.init()\r\n    },\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        window.addEventListener('resize', () => {\r\n          this.setScreenWidth();\r\n          this.bannerStyle();\r\n          this.imgBannerStyle();\r\n        });\r\n      })\r\n    },\r\n    methods: {\r\n      setScreenWidth() {\r\n        this.screenWidth = window.innerWidth;\r\n      },\r\n      init() {\r\n        this.deviceWidth = this.$store.getters.deviceWidth;\r\n        this.getData();\r\n      },\r\n      getData() {\r\n        let url = 'public/banner/list'\r\n        if(this.bannerId !== 0) {\r\n          this.getBanner(`public/banner/${this.bannerId}`);\r\n\r\n        }else {\r\n          if(this.$store.getters.device==='pc') {\r\n            url += '/pc'\r\n          }\r\n          this.getBannerList(url);\r\n        }\r\n        \r\n      },\r\n      getBanner(url) {\r\n        this.$axios.get(url).then(res=>{\r\n          this.banner = [];\r\n          this.lpVideo = [];\r\n\r\n          let date = new Date().getTime();\r\n          let start_date = new Date(res.data.start_date).getTime();\r\n          let end_date = new Date(res.data.end_date).getTime();\r\n          \r\n          if (date > start_date || date < end_date) {\r\n            this.isShowing = true;\r\n          } else {\r\n            this.isShowing = false;\r\n          }\r\n\r\n          // image banner\r\n          if(res.data.type === 0) {\r\n            for(let i=0; i<res.data.imgs.length; i++) {\r\n              let img = res.data.imgs[i];\r\n              this.banner.push({\r\n                  url: img,\r\n                  link: res.data.links[i]\r\n              });\r\n            }\r\n            this.imgBannerRatio = res.data.pc ? res.data.ratio_pc : res.data.ratio;\r\n            this.imgBannerStyle();\r\n          }\r\n          // video banner\r\n          else if(res.data.type >= 1) {\r\n            for(let i=0; i<res.data.imgs.length; i++) {\r\n              let img = res.data.imgs[i];\r\n              let video = res.data.type === 1 ? 'lpVideo' : 'urlVideo';\r\n              this[video].push({\r\n                  url: img,\r\n                  link: res.data.links[i]\r\n              });\r\n            }\r\n            this.bannerRatio = res.data.pc ? res.data.ratio_pc : res.data.ratio;\r\n            this.bannerStyle();\r\n          }\r\n          \r\n          setTimeout(() => {\r\n            this.$emit('getBanner');\r\n          }, 700);\r\n        }).catch(()=>{\r\n          setTimeout(() => {\r\n            this.$emit('getBanner');\r\n          }, 700);\r\n        });\r\n      },\r\n      getBannerList(url) {\r\n        this.$axios.get(url).then(res=>{\r\n          if (res.data.start_date && res.data.end_date) {\r\n            let date = new Date().getTime();\r\n            let start_date = new Date(res.data.start_date).getTime();\r\n            let end_date = new Date(res.data.end_date).getTime();\r\n            \r\n            if (date > start_date || date < end_date) {\r\n              this.isShowing = true;\r\n            } else {\r\n              this.isShowing = false;\r\n            }\r\n          } else {\r\n            this.isShowing = true;\r\n          }\r\n\r\n          if(res.data.length>0) {\r\n            let imgBanner = res.data.filter(item => item.data[0].type===0);\r\n            if(imgBanner.length>0) {\r\n              this.imgBannerRatio = imgBanner[0].ratio;\r\n              this.banner = imgBanner[0].data;\r\n              this.imgBannerStyle();\r\n            }\r\n            let videoBanner = res.data.filter(item => item.data[0].type === 1 || item.data[0].type === 2);\r\n            if(videoBanner.length>0) {\r\n              this.bannerRatio = videoBanner[0].ratio;\r\n              if (videoBanner[0].data[0].type === 1) this.lpVideo = videoBanner[0].data;\r\n              else if (videoBanner[0].data[0].type === 2) this.urlVideo = videoBanner[0].data;\r\n              this.bannerStyle();\r\n            }\r\n\r\n          }\r\n          setTimeout(() => {\r\n            this.$emit('getBanner');\r\n          }, 700);\r\n        }).catch(()=>{\r\n          setTimeout(() => {\r\n            this.$emit('getBanner');\r\n          }, 700);\r\n        });\r\n      },\r\n      bannerStyle() {\r\n        let deviceWidth = '';\r\n        /* PC */\r\n        if(this.$store.getters.device==='pc') {\r\n          deviceWidth = this.screenWidth;\r\n          if (this.width) deviceWidth = this.width;\r\n\r\n          // custon ratio\r\n          if (this.ratio!==undefined) {\r\n            this.bannerHeight = deviceWidth * this.ratio;\r\n          }\r\n          else {\r\n            // 3:1\r\n            if(this.bannerRatio===0) this.bannerHeight = deviceWidth * 1/3;\r\n            // 4:1\r\n            else if(this.bannerRatio===1) this.bannerHeight = deviceWidth * 1/4;\r\n            // 5:1\r\n            else if(this.bannerRatio===2) this.bannerHeight = deviceWidth * 1/5;\r\n            // 8:1\r\n            else if(this.bannerRatio===3) this.bannerHeight = deviceWidth * 1/8;\r\n            // 1:1\r\n            else if(this.bannerRatio===4) this.bannerHeight = deviceWidth;\r\n          }\r\n        }\r\n        /* Mobile */\r\n        else {\r\n          deviceWidth = this.deviceWidth;\r\n          if (this.width) deviceWidth = this.width;\r\n\r\n          // custon ratio\r\n          if (this.ratio!==undefined) {\r\n            this.bannerHeight = deviceWidth * this.ratio;\r\n          }\r\n          else {\r\n            // 4:3\r\n            if(this.bannerRatio===0) this.bannerHeight = deviceWidth * 3/4;\r\n            // 16:9\r\n            else if(this.bannerRatio===1) this.bannerHeight = deviceWidth * 9/16;\r\n            // 2.35:1\r\n            else if(this.bannerRatio===2) this.bannerHeight = deviceWidth * 1/2.35;\r\n            // 4:1\r\n            else if(this.bannerRatio===3) this.bannerHeight = deviceWidth * 1/4;\r\n            // 1:1\r\n            else if(this.bannerRatio===5) this.bannerHeight = deviceWidth;\r\n          }\r\n        }\r\n        if (this.height) {\r\n          this.bannerHeight = this.height;\r\n        }\r\n      },\r\n      imgBannerStyle() {\r\n        let deviceWidth = '';\r\n        /* PC */\r\n        if(this.$store.getters.device==='pc') {\r\n          deviceWidth = this.screenWidth;\r\n          if (this.width) deviceWidth = this.width;\r\n\r\n          this.imageWidth = deviceWidth;\r\n\r\n          // custom ratio\r\n          if (this.ratio!==undefined) {\r\n            this.imgBannerHeight = deviceWidth * this.ratio;\r\n          }\r\n          else {\r\n            // 3:1\r\n            if(this.imgBannerRatio===0) {\r\n              this.imgBannerHeight = deviceWidth * 1/3;\r\n              this.imageRates = {ratio: '3:1'}\r\n            }\r\n            // 4:1\r\n            else if(this.imgBannerRatio===1) {\r\n              this.imgBannerHeight = deviceWidth * 1/4;\r\n              this.imageRates = {ratio: '4:1'}\r\n            }\r\n            // 5:1\r\n            else if(this.imgBannerRatio===2) {\r\n              this.imgBannerHeight = deviceWidth * 1/5;\r\n              this.imageRates = {ratio: '5:1'}\r\n            }\r\n            // 8:1\r\n            else if(this.imgBannerRatio===3) {\r\n              this.imgBannerHeight = deviceWidth * 1/8;\r\n              this.imageRates = {ratio: '8:1'}\r\n            }\r\n            // 1:1\r\n            else if(this.imgBannerRatio===4) {\r\n              this.imgBannerHeight = deviceWidth;\r\n              this.imageRates = {ratio: '1:1'}\r\n            }\r\n          }\r\n        }\r\n        /* Mobile */\r\n        else {\r\n          deviceWidth = this.deviceWidth;\r\n          if (this.width) deviceWidth = this.width;\r\n\r\n          this.imageWidth = deviceWidth;\r\n\r\n          // custom ratio\r\n          if (this.ratio!==undefined) {\r\n            this.imgBannerHeight = deviceWidth * this.ratio;\r\n          }\r\n          else {\r\n            // 4:3\r\n            if(this.imgBannerRatio===0) {\r\n              this.imgBannerHeight = deviceWidth * 3/4;\r\n              this.imageRates = {ratio: '4:3'}\r\n            }\r\n            // 16:9\r\n            else if(this.imgBannerRatio===1) {\r\n              this.imgBannerHeight = deviceWidth * 9/16;\r\n              this.imageRates = {ratio: '16:9'}\r\n            }\r\n            // 2.35:1\r\n            else if(this.imgBannerRatio===2) {\r\n              this.imgBannerHeight = deviceWidth * 1/2.35;\r\n              this.imageRates = {ratio: '2.35:1'}\r\n            }\r\n            // 4:1\r\n            else if(this.imgBannerRatio===3) {\r\n              this.imgBannerHeight = deviceWidth * 1/4;\r\n              this.imageRates = {ratio: '4:1'}\r\n            }\r\n            // 1:1\r\n            else if(this.imgBannerRatio===5) {\r\n              this.imgBannerHeight = deviceWidth;\r\n              this.imageRates = {ratio: '1:1'}\r\n            }\r\n          }\r\n        }\r\n        if (this.height) {\r\n          this.imgBannerHeight = this.height;\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      imageSliderStyle() {\r\n        let deco = {\r\n          width: `${this.imageWidth}px`,\r\n          height: `${this.imgBannerHeight}px`\r\n        }\r\n        return deco;\r\n      },\r\n      pcVideoHeight() {\r\n        let hei;\r\n        hei = this.screenWidth * 9/16;\r\n        return hei;\r\n      },\r\n      computedVideo() {\r\n        let url = this.urlVideo[0].url;\r\n        // 유튜브\r\n        if(url.indexOf('youtube')>-1) {\r\n          if(url.indexOf('v=')>-1) {\r\n            let leng = url.split('=').length;\r\n            return \"https://www.youtube.com/embed/\" + url.split('=')[leng-1] + \r\n              `?autoplay=1&controls=0&mute=1&modestbranding=1&rel=0&loop=1;playlist=${url.split('=')[leng-1]}`;\r\n          }\r\n          else {\r\n            let leng = url.split('/').length;\r\n            return \"https://www.youtube.com/embed/\" + url.split('/')[leng-1];\r\n          }\r\n        }\r\n\r\n        if(url.indexOf('youtu.be')>-1) {\r\n          let leng = url.split('/').length;\r\n          return \"https://www.youtube.com/embed/\" + url.split('/')[leng-1] + \r\n            `?autoplay=1&controls=0&mute=1&modestbranding=1&rel=0&loop=1;playlist=${url.split('/')[leng-1]}`;\r\n        }\r\n\r\n      },\r\n      iframeStyle() {\r\n        return {\r\n          height: `${this.bannerHeight}px`,\r\n        }\r\n      },\r\n      pcIframeStyle() {\r\n        if(this.bannerHeight>=this.pcVideoHeight) {\r\n          return {\r\n            height: this.pcVideoHeight + 'px',\r\n            width: '100%',\r\n            top: '-50%',\r\n            position: 'absolute'\r\n          }\r\n        }\r\n        else {\r\n          return {\r\n            height: this.pcVideoHeight + 'px',\r\n            width: '100%',\r\n            top: `-${(this.pcVideoHeight - this.bannerHeight) / 2}px`,\r\n            position: 'absolute'\r\n          }\r\n        }\r\n      },\r\n      pcVideoStyle() {\r\n        if(this.bannerHeight>=this.pcVideoHeight) {\r\n          return {\r\n            width: '100%',\r\n            top: '-50%',\r\n            position: 'absolute'\r\n          }\r\n        }\r\n        else {\r\n          return {\r\n            width: '100%',\r\n            top: `-${(this.pcVideoHeight - this.bannerHeight) / 2}px`,\r\n            position: 'absolute'\r\n          }\r\n        }\r\n      },\r\n      wrapperStyle() {\r\n        return {\r\n          paddingBottom: `${this.bannerHeight}px`,\r\n          height: this.bannerHeight+'px',\r\n          overflow: 'hidden',\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      bannerId(n) {\r\n        this.banner = [];\r\n        this.lpVideo = [];\r\n        this.urlVideo = [];\r\n        this.init();\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .video-wrapper {\r\n    position: relative;\r\n    height: 0;\r\n    margin-bottom: 2px;\r\n  }\r\n  .video-wrapper iframe {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    border: 0;\r\n    pointer-events: none;\r\n  }\r\n</style>"]}]}